<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="Android">
<meta property="og:type" content="website">
<meta property="og:title" content="前行者">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="前行者">
<meta property="og:description" content="Android">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前行者">
<meta name="twitter:description" content="Android">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '江俊超'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/"/>

  <title> 前行者 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">前行者</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">不断前行，从未停滞</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/10/android小技巧之来不及解释了快上车-EventBus3/" itemprop="url">
                  android小技巧之来不及解释了快上车--EventBus3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-10T09:52:32+08:00" content="2016-08-10">
              2016-08-10
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是EventBus"><a href="#什么是EventBus" class="headerlink" title="什么是EventBus"></a>什么是EventBus</h2><p><a href="https://github.com/greenrobot/EventBus" target="_blank" rel="external">先附上EventBus的git地址</a></p>
<p>EventBus，就按照名字翻译来说”事件公共汽车”,官方的说法是”EventBus is a publish/subscribe event bus optimized for Android.”也就是”eventbus是Android发布/订阅事件总线”。或许不太好理解，但是在我现在做的这个项目中，我已经用EventBus来取代广播和handler，而且十分的好用及简单。</p>
<p>下面附上从官方偷过来的图<br><img src="https://raw.githubusercontent.com/greenrobot/EventBus/master/EventBus-Publish-Subscribe.png" alt=""></p>
<h2 id="如何获取EventBus"><a href="#如何获取EventBus" class="headerlink" title="如何获取EventBus"></a>如何获取EventBus</h2><ol>
<li><p>Android Studio(如果你还没有用上，那你就out了)直接使用依赖的方式即可</p>
<pre><code>compile &apos;org.greenrobot:eventbus:3.0.0&apos;
</code></pre></li>
<li><p>Eclipse…..只能去下载jar包了</p>
<p><a href="http://search.maven.org/#search%7Cga%7C1%7Cg%3A%22de.greenrobot%22%20AND%20a%3A%22eventbus%22" target="_blank" rel="external">EventBus jar 下载地址</a></p>
<h2 id="EventBus使用方法"><a href="#EventBus使用方法" class="headerlink" title="EventBus使用方法"></a>EventBus使用方法</h2><p>EventBus使用是特别的简单，只需要四步(当然依赖不算一步)</p>
<h3 id="第一步-注册"><a href="#第一步-注册" class="headerlink" title="第一步 注册"></a>第一步 注册</h3><p>在需要的地方进行注册，一般是在onCreate方法内进行注册</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EventBus.getDefault().register(<span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<h3 id="第二步-取消注册"><a href="#第二步-取消注册" class="headerlink" title="第二步 取消注册"></a>第二步 取消注册</h3><p>页面销毁一定要取消注册，要不然会照成内存泄露一般是在onDestroy或者onDestroyView方法中取消注册</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EventBus.getDefault().unregister(<span class="keyword">this</span>);</div></pre></td></tr></table></figure>
<h3 id="第三步-写上相应的方法"><a href="#第三步-写上相应的方法" class="headerlink" title="第三步 写上相应的方法"></a>第三步 写上相应的方法</h3><p>EventBus获取事件的方法有四个，修饰符是public，可接受有参和无参。意思就不用解释了，和名字一样。</p>
<pre><code>1、onEvent
2、onEventMainThread
3、onEventBackground
4、onEventAsync
</code></pre><p>在我项目中我最常用的是onEventMainThread，因为我更多的是用来更新UI。</p>
<pre><code>@Subscribe
public void onEventMainThread(EventObject event) {
   //TODO 你要做的事情
}
</code></pre><h3 id="第四步-post"><a href="#第四步-post" class="headerlink" title="第四步 post"></a>第四步 post</h3><p>在需要发送事件的地方post对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">EventBus.getDefault().post(EventObject);</div></pre></td></tr></table></figure>
<p>在这里一定要解释EventObject这个东西，这是一个事件对象。接收的事件的参数必须要与发送事件事件的参数一致才能接收事件，这就好比聊QQ、微信发消息，EventObject就是你要聊天的对象。</p>
<p>当然，有单聊和群聊，假如在多个地方注册同样的EventObject，改如何区分？<br>EventObject是一个对象，那么EventObject久可以有很多属性，例如你要在群里问某一个人一件事件，你发送了消息，大家都接收到了，但只有你问的对象才回复你。一般会怎么做，要么直接说某某啥啥的，要么直接艾特他。这样虽然所有人都看见了这个消息，但只有你问的对象才回复你。（如果这样你都不明白，那只有去补习java基础和广播部分的知识了）</p>
<h3 id="EventBus的实际小案例"><a href="#EventBus的实际小案例" class="headerlink" title="EventBus的实际小案例"></a>EventBus的实际小案例</h3><p>代码是敲出来的，所以再多的文字说明都是苍白的。这里就来整个实际的小案例，也是我在项目中的运用方式。</p>
<h4 id="例子（一）-更新UI"><a href="#例子（一）-更新UI" class="headerlink" title="例子（一） 更新UI"></a>例子（一） 更新UI</h4><p>主要实现类是未登录状态下登陆成功后更新UI，使用步骤和前面一样，就不在多说。</p>
<p>事件对象，也就是一个普通的javaBean</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * &lt;p&gt;作者：江俊超 on 2016/8/10 15:01&lt;/p&gt;</div><div class="line"> * &lt;p&gt;邮箱：928692385@qq.com&lt;/p&gt;</div><div class="line"> * &lt;p&gt;更新UI的事件对象&lt;/p&gt;</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateUiEvent</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> tag;</div><div class="line">    <span class="keyword">private</span> String msf;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">UpdateUiEvent</span><span class="params">(<span class="keyword">int</span> tag, String msf)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.tag = tag;</div><div class="line">        <span class="keyword">this</span>.msf = msf;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getTag</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> tag;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTag</span><span class="params">(<span class="keyword">int</span> tag)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.tag = tag;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getMsf</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> msf;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMsf</span><span class="params">(String msf)</span> </span>&#123;</div><div class="line">        <span class="keyword">this</span>.msf = msf;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>页面非常的简单，一个是未登录页面，可以不断的打开自己，是标准的启动模式，另一个是登陆页面，输入登陆信息后就会关闭并把输入的信息发送出去。未登录页面接收到事件之后想信息显示在TextView中。</p>
<p>未登录界面xml，很简单两个按钮，一个文本框</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">    <span class="attr">tools:context</span>=<span class="string">".NoLoginActivity"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">TextView</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/tv_msg"</span></div><div class="line">        <span class="attr">android:layout_centerInParent</span>=<span class="string">"true"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"当前未登录"</span></div><div class="line">        <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:textSize</span>=<span class="string">"20sp"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"去登陆"</span></div><div class="line">        <span class="attr">android:onClick</span>=<span class="string">"goLogin"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"继续启动自己"</span></div><div class="line">        <span class="attr">android:onClick</span>=<span class="string">"startUpdateUI"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>未登陆界面代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoLoginActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> TextView mTvMsg;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_no_login1);</div><div class="line">        mTvMsg = (TextView) findViewById(R.id.tv_msg);</div><div class="line">        EventBus.getDefault().register(<span class="keyword">this</span>);<span class="comment">//注册</span></div><div class="line">        mTvMsg.append(<span class="string">"  当前页面："</span>+hashCode()+<span class="string">" \n"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">startUpdateUI</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        startActivity(<span class="keyword">new</span> Intent(<span class="keyword">this</span>, NoLoginActivity.class));</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">goLogin</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        startActivity(<span class="keyword">new</span> Intent(<span class="keyword">this</span>, LoginActivity.class));</div><div class="line">    &#125;</div><div class="line">    <span class="meta">@Subscribe</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onEventMainThread</span><span class="params">(UpdateUiEvent uiEvent)</span> </span>&#123;</div><div class="line">        mTvMsg.setText(<span class="string">"  当前页面："</span>+hashCode()+<span class="string">"\n信息："</span>+uiEvent.getMs());<span class="comment">//接收到事件  将信息设置到页面上</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</div><div class="line">        EventBus.getDefault().unregister(<span class="keyword">this</span>);<span class="comment">//取消注册</span></div><div class="line">        <span class="keyword">super</span>.onDestroy();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>登陆界面xml，一个按钮和一个输入框</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">xmlns:tools</span>=<span class="string">"http://schemas.android.com/tools"</span></div><div class="line">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></div><div class="line">    <span class="attr">android:gravity</span>=<span class="string">"center"</span></div><div class="line">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></div><div class="line">    <span class="attr">tools:context</span>=<span class="string">"aohanyao.com.eventbussample.LoginActivity"</span>&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">EditText</span></span></div><div class="line">        <span class="attr">android:id</span>=<span class="string">"@+id/et_msg"</span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:hint</span>=<span class="string">"请输入登陆信息"</span> /&gt;</div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">Button</span></span></div><div class="line">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></div><div class="line">        <span class="attr">android:onClick</span>=<span class="string">"login"</span></div><div class="line">        <span class="attr">android:text</span>=<span class="string">"登陆"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">LinearLayout</span>&gt;</span></div></pre></td></tr></table></figure>
<p>登陆页面代码，点击登陆，获取输入框的值，提示一下并发送出去。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginActivity</span> <span class="keyword">extends</span> <span class="title">AppCompatActivity</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> EditText mEtMsg;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">        setContentView(R.layout.activity_login);</div><div class="line">        mEtMsg = (EditText) findViewById(R.id.et_msg);</div><div class="line">    &#125;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">(View view)</span> </span>&#123;</div><div class="line">        Toast.makeText(<span class="keyword">this</span>, mEtMsg.getText().toString(), Toast.LENGTH_SHORT).show();</div><div class="line">        <span class="comment">//发送事件</span></div><div class="line">        EventBus.getDefault().post(<span class="keyword">new</span> UpdateUiEvent(mEtMsg.getText().toString()));</div><div class="line">        finish();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>最终就是下面的效果了，先不断的启动当前Activity三次后登陆，完成后，按下后退键，可以看到每个页面上面都显示了输入的内容。</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/eventBusSample.gif" alt=""></p>
<h2 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h2><ol>
<li>像上面的例子是一种。</li>
<li>类似于未读信息的显示之类的，有多个页面需要显示未读信息，但是在其中一个页面读了一条，那么所有页面剩余的未读信息UI都要更改。</li>
<li>…….好多好多</li>
</ol>
<p>其实说上来，需要用自定义广播的地方，都可以使用EventBus来代替。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>文采不好，敬请见谅！</p>
<p><a href="https://github.com/aohanyao/Advanced/tree/master/code/other/EventBusSample" target="_blank" rel="external">源码地址</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/09/安卓开发小技巧之有些坑/" itemprop="url">
                  安卓开发小技巧之有些坑
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-09T15:14:02+08:00" content="2016-08-09">
              2016-08-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/09/Android初级进阶之自定义时钟-二/" itemprop="url">
                  Android初级进阶之自定义时钟(二)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-09T14:16:13+08:00" content="2016-08-09">
              2016-08-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>在上一篇<a href="http://www.jianshu.com/p/7df63512a1b0" target="_blank" rel="external">Android初级进阶之自定义时钟(一)</a>里面已经完成了时钟的静态绘制，是这个样子的：</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/colick_img.png" alt=""></p>
<p>现在我们要做的是在上面的基础上继续完善，达到以下的效果。</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/时钟滚动.gif" alt=""></p>
<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>果然，我还是不够格，还是要继续学习，继续积累。上一篇不是已经完成了页面的绘制咯，然后需要将时分秒的指针动起来，与系统时间对应，想了老半天：没有办法计算出指针的x2和y2坐标，于是什么勾股定理，三角函数统统上了一遍，结果还是不行。最后才发现，答案就在前面，我已经写出来了</p>
<pre><code>绘制刻度线与刻度值是最大的难点，在这里就是利用了Canvas为我们提供的rotate方法，顾名思义，就是旋转画布。我们以视图坐标系 x y 进行绘制，没绘制完成一次，旋转相应的角度就完成了刻度线的绘制。玩过PS的人应该好理解。
</code></pre><p>明明都已经将刻度盘都画出来了，那么是不是只要将刻度盘的刻度的长度延伸，这不就是时分秒指针了吗？作孽啊！</p>
<h3 id="获取当前的时间"><a href="#获取当前的时间" class="headerlink" title="获取当前的时间"></a>获取当前的时间</h3><pre><code>int hour = Integer.parseInt(new SimpleDateFormat(&quot;HH&quot;).format(new Date()));
int minute = Integer.parseInt(new SimpleDateFormat(&quot;mm&quot;).format(new Date()));
int second = Integer.parseInt(new SimpleDateFormat(&quot;ss&quot;).format(new Date()));
</code></pre><h3 id="绘制指针"><a href="#绘制指针" class="headerlink" title="绘制指针"></a>绘制指针</h3><p>绘制指针并不难，就和刻度一样，只不过是将长度变长了而已，这里面最关键的部分是求角度，不过这没什么难度的，以下是绘制指针的代码</p>
<pre><code>//------------------绘制时针
 canvas.save();//保存画布
 Paint paintHour = new Paint();
 paintHour.setStrokeWidth(15);//宽度
 paintHour.setColor(0xffff6600);//颜色 红色
 paintHour.setAntiAlias(true);//抗锯齿
 //当前小时百分比的度数  分钟在一个小时内的度数
 float hourDegree = (hour / 12f * 360) + (minute / 60f * 15/*一个小时是15度*/);
 int hourWidth = (int) (mCircleWidth / 2 * 0.5/*时钟半径的一半，也就是长度*/);
 canvas.rotate(hourDegree, mCircleWidth / 2, mCircleWidth / 2);//旋转角度
 canvas.drawLine(mCircleWidth / 2,
         mCircleWidth / 2 - hourWidth,
         mCircleWidth / 2,
         mCircleWidth / 2 + offset + 10/*offset + 10 是为了突出指针，不至于难看*/,
         paintHour);
 //当前画布与保存的画布合并
 canvas.restore();
 //------------------绘制时针

 //------------------绘制分针
 canvas.save();//保存画布
 Paint paintMinute = new Paint();
 paintMinute.setStrokeWidth(10);
 paintMinute.setAntiAlias(true);
 float minuteDegree = minute / 60f * 360;
 int minuteWidth = (int) (mCircleWidth / 2 * 0.7);
 canvas.rotate(minuteDegree, mCircleWidth / 2, mCircleWidth / 2);
 canvas.drawLine(mCircleWidth / 2,
         mCircleWidth / 2 - minuteWidth,
         mCircleWidth / 2,
         mCircleWidth / 2 + offset * 2,
         paintMinute);
 //当前画布与保存的画布合并
 canvas.restore();
 //------------------绘制分针


 //----------------------秒针
 Paint paintSecond = new Paint();
 paintSecond.setStrokeWidth(7);
 paintSecond.setAntiAlias(true);
 paintSecond.setColor(0xffff0000);
 canvas.save();
 float secondDegree = second / 60f * 360;//秒针  15秒的 度数
 canvas.rotate(secondDegree, mCircleWidth / 2, mCircleWidth / 2);
 int secondWidth = (int) (mCircleWidth / 2 * 0.9);//获得秒针的长度
 canvas.drawLine(mCircleWidth / 2,
         mCircleWidth / 2 - secondWidth,
         mCircleWidth / 2,
         mCircleWidth / 2 + offset * 3,
         paintSecond);
 //当前画布与保存的画布合并
 canvas.restore();
 //----------------------秒针

 //---------------------绘制秒针上面的圆圈
 canvas.save();
 Paint pinPaintCircle = new Paint();
 pinPaintCircle.setColor(0xffff0000);
 pinPaintCircle.setAntiAlias(true);
 canvas.drawCircle(mCircleWidth / 2, mCircleWidth / 2, offset, pinPaintCircle);
 canvas.restore();
 //---------------------绘制秒针上面的圆圈
</code></pre><p>完了，这部分就是绘制指针，如何让指针动起来，也非常的简单，只需要绘制完成后调用postInvalidateDelayed(1000)方法延迟一秒后继续绘制就好了。就和前面的效果图一模一样啦。</p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>好记性不如烂笔头，这是一句是在的话。有很多东西，尤其是像我们搞技术的，技术不用，慢慢的就会忘记的。另外我的语言水平不怎么好和技术都不怎么好，如果我哪里说得不对，及时指出，我会虚心更正。</p>
<h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><p>随着慢慢的深入，我会将我的一些经验放出来的，希望共同进步。这个时钟暂时就到这里，不过我会在这个基础之上继续弄仪表盘。</p>
<p><a href="https://github.com/aohanyao/Advanced/blob/master/code/CustomView/Dashboard/app/src/main/java/aohanyao/com/dashboard/DashboardView.java" target="_blank" rel="external">源码地址</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/09/android小技巧之不缓存的ViewPager/" itemprop="url">
                  android小技巧之不缓存的ViewPager
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-09T09:24:29+08:00" content="2016-08-09">
              2016-08-09
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>在开发中我们会经常用到ViewPager这个类，比如引导页的啦，主页啦，等等之类的。</p>
<p>一般情况下，我在ViewPger中都是放的Framgnt,这样简单有方便，但是ViewPager却会默认的缓存当前页面的最近两个页面，于是问题就产生了，我们的需求是只有切换到哪页，哪页才创建或者加载布局，但是谷歌官方的ViewPager却没有自带这个选项,就算我们用setOffscreenPageLimit(0)也不能解决这个问题：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_OFFSCREEN_PAGES = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOffscreenPageLimit</span><span class="params">(<span class="keyword">int</span> limit)</span> </span>&#123;</div><div class="line">      <span class="keyword">if</span> (limit &lt; DEFAULT_OFFSCREEN_PAGES) &#123;</div><div class="line">           Log.w(TAG, <span class="string">"Requested offscreen page limit "</span> + limit + <span class="string">" too small; defaulting to "</span> +</div><div class="line">                  DEFAULT_OFFSCREEN_PAGES);</div><div class="line">          limit = DEFAULT_OFFSCREEN_PAGES;</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">if</span> (limit != mOffscreenPageLimit) &#123;</div><div class="line">          mOffscreenPageLimit = limit;</div><div class="line">          populate();</div><div class="line">      &#125;</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>从上面的代码可以看到，就算设置0、负数，它也会默认为1，为了解决这个问题，有两个方法：<br>    第一种：重写整个ViewPager<br>    第二种：使用Fragment的setUserVisibleHint方法（相当于Activity中的onResume方法）</p>
<h4 id="第一种方法"><a href="#第一种方法" class="headerlink" title="第一种方法"></a>第一种方法</h4><p>重写整个ViewPager，下面直接上代码，需要的直接拷贝过去就好  没有什么技术含量，一般情况下我用的都是第二种方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div><div class="line">236</div><div class="line">237</div><div class="line">238</div><div class="line">239</div><div class="line">240</div><div class="line">241</div><div class="line">242</div><div class="line">243</div><div class="line">244</div><div class="line">245</div><div class="line">246</div><div class="line">247</div><div class="line">248</div><div class="line">249</div><div class="line">250</div><div class="line">251</div><div class="line">252</div><div class="line">253</div><div class="line">254</div><div class="line">255</div><div class="line">256</div><div class="line">257</div><div class="line">258</div><div class="line">259</div><div class="line">260</div><div class="line">261</div><div class="line">262</div><div class="line">263</div><div class="line">264</div><div class="line">265</div><div class="line">266</div><div class="line">267</div><div class="line">268</div><div class="line">269</div><div class="line">270</div><div class="line">271</div><div class="line">272</div><div class="line">273</div><div class="line">274</div><div class="line">275</div><div class="line">276</div><div class="line">277</div><div class="line">278</div><div class="line">279</div><div class="line">280</div><div class="line">281</div><div class="line">282</div><div class="line">283</div><div class="line">284</div><div class="line">285</div><div class="line">286</div><div class="line">287</div><div class="line">288</div><div class="line">289</div><div class="line">290</div><div class="line">291</div><div class="line">292</div><div class="line">293</div><div class="line">294</div><div class="line">295</div><div class="line">296</div><div class="line">297</div><div class="line">298</div><div class="line">299</div><div class="line">300</div><div class="line">301</div><div class="line">302</div><div class="line">303</div><div class="line">304</div><div class="line">305</div><div class="line">306</div><div class="line">307</div><div class="line">308</div><div class="line">309</div><div class="line">310</div><div class="line">311</div><div class="line">312</div><div class="line">313</div><div class="line">314</div><div class="line">315</div><div class="line">316</div><div class="line">317</div><div class="line">318</div><div class="line">319</div><div class="line">320</div><div class="line">321</div><div class="line">322</div><div class="line">323</div><div class="line">324</div><div class="line">325</div><div class="line">326</div><div class="line">327</div><div class="line">328</div><div class="line">329</div><div class="line">330</div><div class="line">331</div><div class="line">332</div><div class="line">333</div><div class="line">334</div><div class="line">335</div><div class="line">336</div><div class="line">337</div><div class="line">338</div><div class="line">339</div><div class="line">340</div><div class="line">341</div><div class="line">342</div><div class="line">343</div><div class="line">344</div><div class="line">345</div><div class="line">346</div><div class="line">347</div><div class="line">348</div><div class="line">349</div><div class="line">350</div><div class="line">351</div><div class="line">352</div><div class="line">353</div><div class="line">354</div><div class="line">355</div><div class="line">356</div><div class="line">357</div><div class="line">358</div><div class="line">359</div><div class="line">360</div><div class="line">361</div><div class="line">362</div><div class="line">363</div><div class="line">364</div><div class="line">365</div><div class="line">366</div><div class="line">367</div><div class="line">368</div><div class="line">369</div><div class="line">370</div><div class="line">371</div><div class="line">372</div><div class="line">373</div><div class="line">374</div><div class="line">375</div><div class="line">376</div><div class="line">377</div><div class="line">378</div><div class="line">379</div><div class="line">380</div><div class="line">381</div><div class="line">382</div><div class="line">383</div><div class="line">384</div><div class="line">385</div><div class="line">386</div><div class="line">387</div><div class="line">388</div><div class="line">389</div><div class="line">390</div><div class="line">391</div><div class="line">392</div><div class="line">393</div><div class="line">394</div><div class="line">395</div><div class="line">396</div><div class="line">397</div><div class="line">398</div><div class="line">399</div><div class="line">400</div><div class="line">401</div><div class="line">402</div><div class="line">403</div><div class="line">404</div><div class="line">405</div><div class="line">406</div><div class="line">407</div><div class="line">408</div><div class="line">409</div><div class="line">410</div><div class="line">411</div><div class="line">412</div><div class="line">413</div><div class="line">414</div><div class="line">415</div><div class="line">416</div><div class="line">417</div><div class="line">418</div><div class="line">419</div><div class="line">420</div><div class="line">421</div><div class="line">422</div><div class="line">423</div><div class="line">424</div><div class="line">425</div><div class="line">426</div><div class="line">427</div><div class="line">428</div><div class="line">429</div><div class="line">430</div><div class="line">431</div><div class="line">432</div><div class="line">433</div><div class="line">434</div><div class="line">435</div><div class="line">436</div><div class="line">437</div><div class="line">438</div><div class="line">439</div><div class="line">440</div><div class="line">441</div><div class="line">442</div><div class="line">443</div><div class="line">444</div><div class="line">445</div><div class="line">446</div><div class="line">447</div><div class="line">448</div><div class="line">449</div><div class="line">450</div><div class="line">451</div><div class="line">452</div><div class="line">453</div><div class="line">454</div><div class="line">455</div><div class="line">456</div><div class="line">457</div><div class="line">458</div><div class="line">459</div><div class="line">460</div><div class="line">461</div><div class="line">462</div><div class="line">463</div><div class="line">464</div><div class="line">465</div><div class="line">466</div><div class="line">467</div><div class="line">468</div><div class="line">469</div><div class="line">470</div><div class="line">471</div><div class="line">472</div><div class="line">473</div><div class="line">474</div><div class="line">475</div><div class="line">476</div><div class="line">477</div><div class="line">478</div><div class="line">479</div><div class="line">480</div><div class="line">481</div><div class="line">482</div><div class="line">483</div><div class="line">484</div><div class="line">485</div><div class="line">486</div><div class="line">487</div><div class="line">488</div><div class="line">489</div><div class="line">490</div><div class="line">491</div><div class="line">492</div><div class="line">493</div><div class="line">494</div><div class="line">495</div><div class="line">496</div><div class="line">497</div><div class="line">498</div><div class="line">499</div><div class="line">500</div><div class="line">501</div><div class="line">502</div><div class="line">503</div><div class="line">504</div><div class="line">505</div><div class="line">506</div><div class="line">507</div><div class="line">508</div><div class="line">509</div><div class="line">510</div><div class="line">511</div><div class="line">512</div><div class="line">513</div><div class="line">514</div><div class="line">515</div><div class="line">516</div><div class="line">517</div><div class="line">518</div><div class="line">519</div><div class="line">520</div><div class="line">521</div><div class="line">522</div><div class="line">523</div><div class="line">524</div><div class="line">525</div><div class="line">526</div><div class="line">527</div><div class="line">528</div><div class="line">529</div><div class="line">530</div><div class="line">531</div><div class="line">532</div><div class="line">533</div><div class="line">534</div><div class="line">535</div><div class="line">536</div><div class="line">537</div><div class="line">538</div><div class="line">539</div><div class="line">540</div><div class="line">541</div><div class="line">542</div><div class="line">543</div><div class="line">544</div><div class="line">545</div><div class="line">546</div><div class="line">547</div><div class="line">548</div><div class="line">549</div><div class="line">550</div><div class="line">551</div><div class="line">552</div><div class="line">553</div><div class="line">554</div><div class="line">555</div><div class="line">556</div><div class="line">557</div><div class="line">558</div><div class="line">559</div><div class="line">560</div><div class="line">561</div><div class="line">562</div><div class="line">563</div><div class="line">564</div><div class="line">565</div><div class="line">566</div><div class="line">567</div><div class="line">568</div><div class="line">569</div><div class="line">570</div><div class="line">571</div><div class="line">572</div><div class="line">573</div><div class="line">574</div><div class="line">575</div><div class="line">576</div><div class="line">577</div><div class="line">578</div><div class="line">579</div><div class="line">580</div><div class="line">581</div><div class="line">582</div><div class="line">583</div><div class="line">584</div><div class="line">585</div><div class="line">586</div><div class="line">587</div><div class="line">588</div><div class="line">589</div><div class="line">590</div><div class="line">591</div><div class="line">592</div><div class="line">593</div><div class="line">594</div><div class="line">595</div><div class="line">596</div><div class="line">597</div><div class="line">598</div><div class="line">599</div><div class="line">600</div><div class="line">601</div><div class="line">602</div><div class="line">603</div><div class="line">604</div><div class="line">605</div><div class="line">606</div><div class="line">607</div><div class="line">608</div><div class="line">609</div><div class="line">610</div><div class="line">611</div><div class="line">612</div><div class="line">613</div><div class="line">614</div><div class="line">615</div><div class="line">616</div><div class="line">617</div><div class="line">618</div><div class="line">619</div><div class="line">620</div><div class="line">621</div><div class="line">622</div><div class="line">623</div><div class="line">624</div><div class="line">625</div><div class="line">626</div><div class="line">627</div><div class="line">628</div><div class="line">629</div><div class="line">630</div><div class="line">631</div><div class="line">632</div><div class="line">633</div><div class="line">634</div><div class="line">635</div><div class="line">636</div><div class="line">637</div><div class="line">638</div><div class="line">639</div><div class="line">640</div><div class="line">641</div><div class="line">642</div><div class="line">643</div><div class="line">644</div><div class="line">645</div><div class="line">646</div><div class="line">647</div><div class="line">648</div><div class="line">649</div><div class="line">650</div><div class="line">651</div><div class="line">652</div><div class="line">653</div><div class="line">654</div><div class="line">655</div><div class="line">656</div><div class="line">657</div><div class="line">658</div><div class="line">659</div><div class="line">660</div><div class="line">661</div><div class="line">662</div><div class="line">663</div><div class="line">664</div><div class="line">665</div><div class="line">666</div><div class="line">667</div><div class="line">668</div><div class="line">669</div><div class="line">670</div><div class="line">671</div><div class="line">672</div><div class="line">673</div><div class="line">674</div><div class="line">675</div><div class="line">676</div><div class="line">677</div><div class="line">678</div><div class="line">679</div><div class="line">680</div><div class="line">681</div><div class="line">682</div><div class="line">683</div><div class="line">684</div><div class="line">685</div><div class="line">686</div><div class="line">687</div><div class="line">688</div><div class="line">689</div><div class="line">690</div><div class="line">691</div><div class="line">692</div><div class="line">693</div><div class="line">694</div><div class="line">695</div><div class="line">696</div><div class="line">697</div><div class="line">698</div><div class="line">699</div><div class="line">700</div><div class="line">701</div><div class="line">702</div><div class="line">703</div><div class="line">704</div><div class="line">705</div><div class="line">706</div><div class="line">707</div><div class="line">708</div><div class="line">709</div><div class="line">710</div><div class="line">711</div><div class="line">712</div><div class="line">713</div><div class="line">714</div><div class="line">715</div><div class="line">716</div><div class="line">717</div><div class="line">718</div><div class="line">719</div><div class="line">720</div><div class="line">721</div><div class="line">722</div><div class="line">723</div><div class="line">724</div><div class="line">725</div><div class="line">726</div><div class="line">727</div><div class="line">728</div><div class="line">729</div><div class="line">730</div><div class="line">731</div><div class="line">732</div><div class="line">733</div><div class="line">734</div><div class="line">735</div><div class="line">736</div><div class="line">737</div><div class="line">738</div><div class="line">739</div><div class="line">740</div><div class="line">741</div><div class="line">742</div><div class="line">743</div><div class="line">744</div><div class="line">745</div><div class="line">746</div><div class="line">747</div><div class="line">748</div><div class="line">749</div><div class="line">750</div><div class="line">751</div><div class="line">752</div><div class="line">753</div><div class="line">754</div><div class="line">755</div><div class="line">756</div><div class="line">757</div><div class="line">758</div><div class="line">759</div><div class="line">760</div><div class="line">761</div><div class="line">762</div><div class="line">763</div><div class="line">764</div><div class="line">765</div><div class="line">766</div><div class="line">767</div><div class="line">768</div><div class="line">769</div><div class="line">770</div><div class="line">771</div><div class="line">772</div><div class="line">773</div><div class="line">774</div><div class="line">775</div><div class="line">776</div><div class="line">777</div><div class="line">778</div><div class="line">779</div><div class="line">780</div><div class="line">781</div><div class="line">782</div><div class="line">783</div><div class="line">784</div><div class="line">785</div><div class="line">786</div><div class="line">787</div><div class="line">788</div><div class="line">789</div><div class="line">790</div><div class="line">791</div><div class="line">792</div><div class="line">793</div><div class="line">794</div><div class="line">795</div><div class="line">796</div><div class="line">797</div><div class="line">798</div><div class="line">799</div><div class="line">800</div><div class="line">801</div><div class="line">802</div><div class="line">803</div><div class="line">804</div><div class="line">805</div><div class="line">806</div><div class="line">807</div><div class="line">808</div><div class="line">809</div><div class="line">810</div><div class="line">811</div><div class="line">812</div><div class="line">813</div><div class="line">814</div><div class="line">815</div><div class="line">816</div><div class="line">817</div><div class="line">818</div><div class="line">819</div><div class="line">820</div><div class="line">821</div><div class="line">822</div><div class="line">823</div><div class="line">824</div><div class="line">825</div><div class="line">826</div><div class="line">827</div><div class="line">828</div><div class="line">829</div><div class="line">830</div><div class="line">831</div><div class="line">832</div><div class="line">833</div><div class="line">834</div><div class="line">835</div><div class="line">836</div><div class="line">837</div><div class="line">838</div><div class="line">839</div><div class="line">840</div><div class="line">841</div><div class="line">842</div><div class="line">843</div><div class="line">844</div><div class="line">845</div><div class="line">846</div><div class="line">847</div><div class="line">848</div><div class="line">849</div><div class="line">850</div><div class="line">851</div><div class="line">852</div><div class="line">853</div><div class="line">854</div><div class="line">855</div><div class="line">856</div><div class="line">857</div><div class="line">858</div><div class="line">859</div><div class="line">860</div><div class="line">861</div><div class="line">862</div><div class="line">863</div><div class="line">864</div><div class="line">865</div><div class="line">866</div><div class="line">867</div><div class="line">868</div><div class="line">869</div><div class="line">870</div><div class="line">871</div><div class="line">872</div><div class="line">873</div><div class="line">874</div><div class="line">875</div><div class="line">876</div><div class="line">877</div><div class="line">878</div><div class="line">879</div><div class="line">880</div><div class="line">881</div><div class="line">882</div><div class="line">883</div><div class="line">884</div><div class="line">885</div><div class="line">886</div><div class="line">887</div><div class="line">888</div><div class="line">889</div><div class="line">890</div><div class="line">891</div><div class="line">892</div><div class="line">893</div><div class="line">894</div><div class="line">895</div><div class="line">896</div><div class="line">897</div><div class="line">898</div><div class="line">899</div><div class="line">900</div><div class="line">901</div><div class="line">902</div><div class="line">903</div><div class="line">904</div><div class="line">905</div><div class="line">906</div><div class="line">907</div><div class="line">908</div><div class="line">909</div><div class="line">910</div><div class="line">911</div><div class="line">912</div><div class="line">913</div><div class="line">914</div><div class="line">915</div><div class="line">916</div><div class="line">917</div><div class="line">918</div><div class="line">919</div><div class="line">920</div><div class="line">921</div><div class="line">922</div><div class="line">923</div><div class="line">924</div><div class="line">925</div><div class="line">926</div><div class="line">927</div><div class="line">928</div><div class="line">929</div><div class="line">930</div><div class="line">931</div><div class="line">932</div><div class="line">933</div><div class="line">934</div><div class="line">935</div><div class="line">936</div><div class="line">937</div><div class="line">938</div><div class="line">939</div><div class="line">940</div><div class="line">941</div><div class="line">942</div><div class="line">943</div><div class="line">944</div><div class="line">945</div><div class="line">946</div><div class="line">947</div><div class="line">948</div><div class="line">949</div><div class="line">950</div><div class="line">951</div><div class="line">952</div><div class="line">953</div><div class="line">954</div><div class="line">955</div><div class="line">956</div><div class="line">957</div><div class="line">958</div><div class="line">959</div><div class="line">960</div><div class="line">961</div><div class="line">962</div><div class="line">963</div><div class="line">964</div><div class="line">965</div><div class="line">966</div><div class="line">967</div><div class="line">968</div><div class="line">969</div><div class="line">970</div><div class="line">971</div><div class="line">972</div><div class="line">973</div><div class="line">974</div><div class="line">975</div><div class="line">976</div><div class="line">977</div><div class="line">978</div><div class="line">979</div><div class="line">980</div><div class="line">981</div><div class="line">982</div><div class="line">983</div><div class="line">984</div><div class="line">985</div><div class="line">986</div><div class="line">987</div><div class="line">988</div><div class="line">989</div><div class="line">990</div><div class="line">991</div><div class="line">992</div><div class="line">993</div><div class="line">994</div><div class="line">995</div><div class="line">996</div><div class="line">997</div><div class="line">998</div><div class="line">999</div><div class="line">1000</div><div class="line">1001</div><div class="line">1002</div><div class="line">1003</div><div class="line">1004</div><div class="line">1005</div><div class="line">1006</div><div class="line">1007</div><div class="line">1008</div><div class="line">1009</div><div class="line">1010</div><div class="line">1011</div><div class="line">1012</div><div class="line">1013</div><div class="line">1014</div><div class="line">1015</div><div class="line">1016</div><div class="line">1017</div><div class="line">1018</div><div class="line">1019</div><div class="line">1020</div><div class="line">1021</div><div class="line">1022</div><div class="line">1023</div><div class="line">1024</div><div class="line">1025</div><div class="line">1026</div><div class="line">1027</div><div class="line">1028</div><div class="line">1029</div><div class="line">1030</div><div class="line">1031</div><div class="line">1032</div><div class="line">1033</div><div class="line">1034</div><div class="line">1035</div><div class="line">1036</div><div class="line">1037</div><div class="line">1038</div><div class="line">1039</div><div class="line">1040</div><div class="line">1041</div><div class="line">1042</div><div class="line">1043</div><div class="line">1044</div><div class="line">1045</div><div class="line">1046</div><div class="line">1047</div><div class="line">1048</div><div class="line">1049</div><div class="line">1050</div><div class="line">1051</div><div class="line">1052</div><div class="line">1053</div><div class="line">1054</div><div class="line">1055</div><div class="line">1056</div><div class="line">1057</div><div class="line">1058</div><div class="line">1059</div><div class="line">1060</div><div class="line">1061</div><div class="line">1062</div><div class="line">1063</div><div class="line">1064</div><div class="line">1065</div><div class="line">1066</div><div class="line">1067</div><div class="line">1068</div><div class="line">1069</div><div class="line">1070</div><div class="line">1071</div><div class="line">1072</div><div class="line">1073</div><div class="line">1074</div><div class="line">1075</div><div class="line">1076</div><div class="line">1077</div><div class="line">1078</div><div class="line">1079</div><div class="line">1080</div><div class="line">1081</div><div class="line">1082</div><div class="line">1083</div><div class="line">1084</div><div class="line">1085</div><div class="line">1086</div><div class="line">1087</div><div class="line">1088</div><div class="line">1089</div><div class="line">1090</div><div class="line">1091</div><div class="line">1092</div><div class="line">1093</div><div class="line">1094</div><div class="line">1095</div><div class="line">1096</div><div class="line">1097</div><div class="line">1098</div><div class="line">1099</div><div class="line">1100</div><div class="line">1101</div><div class="line">1102</div><div class="line">1103</div><div class="line">1104</div><div class="line">1105</div><div class="line">1106</div><div class="line">1107</div><div class="line">1108</div><div class="line">1109</div><div class="line">1110</div><div class="line">1111</div><div class="line">1112</div><div class="line">1113</div><div class="line">1114</div><div class="line">1115</div><div class="line">1116</div><div class="line">1117</div><div class="line">1118</div><div class="line">1119</div><div class="line">1120</div><div class="line">1121</div><div class="line">1122</div><div class="line">1123</div><div class="line">1124</div><div class="line">1125</div><div class="line">1126</div><div class="line">1127</div><div class="line">1128</div><div class="line">1129</div><div class="line">1130</div><div class="line">1131</div><div class="line">1132</div><div class="line">1133</div><div class="line">1134</div><div class="line">1135</div><div class="line">1136</div><div class="line">1137</div><div class="line">1138</div><div class="line">1139</div><div class="line">1140</div><div class="line">1141</div><div class="line">1142</div><div class="line">1143</div><div class="line">1144</div><div class="line">1145</div><div class="line">1146</div><div class="line">1147</div><div class="line">1148</div><div class="line">1149</div><div class="line">1150</div><div class="line">1151</div><div class="line">1152</div><div class="line">1153</div><div class="line">1154</div><div class="line">1155</div><div class="line">1156</div><div class="line">1157</div><div class="line">1158</div><div class="line">1159</div><div class="line">1160</div><div class="line">1161</div><div class="line">1162</div><div class="line">1163</div><div class="line">1164</div><div class="line">1165</div><div class="line">1166</div><div class="line">1167</div><div class="line">1168</div><div class="line">1169</div><div class="line">1170</div><div class="line">1171</div><div class="line">1172</div><div class="line">1173</div><div class="line">1174</div><div class="line">1175</div><div class="line">1176</div><div class="line">1177</div><div class="line">1178</div><div class="line">1179</div><div class="line">1180</div><div class="line">1181</div><div class="line">1182</div><div class="line">1183</div><div class="line">1184</div><div class="line">1185</div><div class="line">1186</div><div class="line">1187</div><div class="line">1188</div><div class="line">1189</div><div class="line">1190</div><div class="line">1191</div><div class="line">1192</div><div class="line">1193</div><div class="line">1194</div><div class="line">1195</div><div class="line">1196</div><div class="line">1197</div><div class="line">1198</div><div class="line">1199</div><div class="line">1200</div><div class="line">1201</div><div class="line">1202</div><div class="line">1203</div><div class="line">1204</div><div class="line">1205</div><div class="line">1206</div><div class="line">1207</div><div class="line">1208</div><div class="line">1209</div><div class="line">1210</div><div class="line">1211</div><div class="line">1212</div><div class="line">1213</div><div class="line">1214</div><div class="line">1215</div><div class="line">1216</div><div class="line">1217</div><div class="line">1218</div><div class="line">1219</div><div class="line">1220</div><div class="line">1221</div><div class="line">1222</div><div class="line">1223</div><div class="line">1224</div><div class="line">1225</div><div class="line">1226</div><div class="line">1227</div><div class="line">1228</div><div class="line">1229</div><div class="line">1230</div><div class="line">1231</div><div class="line">1232</div><div class="line">1233</div><div class="line">1234</div><div class="line">1235</div><div class="line">1236</div><div class="line">1237</div><div class="line">1238</div><div class="line">1239</div><div class="line">1240</div><div class="line">1241</div><div class="line">1242</div><div class="line">1243</div><div class="line">1244</div><div class="line">1245</div><div class="line">1246</div><div class="line">1247</div><div class="line">1248</div><div class="line">1249</div><div class="line">1250</div><div class="line">1251</div><div class="line">1252</div><div class="line">1253</div><div class="line">1254</div><div class="line">1255</div><div class="line">1256</div><div class="line">1257</div><div class="line">1258</div><div class="line">1259</div><div class="line">1260</div><div class="line">1261</div><div class="line">1262</div><div class="line">1263</div><div class="line">1264</div><div class="line">1265</div><div class="line">1266</div><div class="line">1267</div><div class="line">1268</div><div class="line">1269</div><div class="line">1270</div><div class="line">1271</div><div class="line">1272</div><div class="line">1273</div><div class="line">1274</div><div class="line">1275</div><div class="line">1276</div><div class="line">1277</div><div class="line">1278</div><div class="line">1279</div><div class="line">1280</div><div class="line">1281</div><div class="line">1282</div><div class="line">1283</div><div class="line">1284</div><div class="line">1285</div><div class="line">1286</div><div class="line">1287</div><div class="line">1288</div><div class="line">1289</div><div class="line">1290</div><div class="line">1291</div><div class="line">1292</div><div class="line">1293</div><div class="line">1294</div><div class="line">1295</div><div class="line">1296</div><div class="line">1297</div><div class="line">1298</div><div class="line">1299</div><div class="line">1300</div><div class="line">1301</div><div class="line">1302</div><div class="line">1303</div><div class="line">1304</div><div class="line">1305</div><div class="line">1306</div><div class="line">1307</div><div class="line">1308</div><div class="line">1309</div><div class="line">1310</div><div class="line">1311</div><div class="line">1312</div><div class="line">1313</div><div class="line">1314</div><div class="line">1315</div><div class="line">1316</div><div class="line">1317</div><div class="line">1318</div><div class="line">1319</div><div class="line">1320</div><div class="line">1321</div><div class="line">1322</div><div class="line">1323</div><div class="line">1324</div><div class="line">1325</div><div class="line">1326</div><div class="line">1327</div><div class="line">1328</div><div class="line">1329</div><div class="line">1330</div><div class="line">1331</div><div class="line">1332</div><div class="line">1333</div><div class="line">1334</div><div class="line">1335</div><div class="line">1336</div><div class="line">1337</div><div class="line">1338</div><div class="line">1339</div><div class="line">1340</div><div class="line">1341</div><div class="line">1342</div><div class="line">1343</div><div class="line">1344</div><div class="line">1345</div><div class="line">1346</div><div class="line">1347</div><div class="line">1348</div><div class="line">1349</div><div class="line">1350</div><div class="line">1351</div><div class="line">1352</div><div class="line">1353</div><div class="line">1354</div><div class="line">1355</div><div class="line">1356</div><div class="line">1357</div><div class="line">1358</div><div class="line">1359</div><div class="line">1360</div><div class="line">1361</div><div class="line">1362</div><div class="line">1363</div><div class="line">1364</div><div class="line">1365</div><div class="line">1366</div><div class="line">1367</div><div class="line">1368</div><div class="line">1369</div><div class="line">1370</div><div class="line">1371</div><div class="line">1372</div><div class="line">1373</div><div class="line">1374</div><div class="line">1375</div><div class="line">1376</div><div class="line">1377</div><div class="line">1378</div><div class="line">1379</div><div class="line">1380</div><div class="line">1381</div><div class="line">1382</div><div class="line">1383</div><div class="line">1384</div><div class="line">1385</div><div class="line">1386</div><div class="line">1387</div><div class="line">1388</div><div class="line">1389</div><div class="line">1390</div><div class="line">1391</div><div class="line">1392</div><div class="line">1393</div><div class="line">1394</div><div class="line">1395</div><div class="line">1396</div><div class="line">1397</div><div class="line">1398</div><div class="line">1399</div><div class="line">1400</div><div class="line">1401</div><div class="line">1402</div><div class="line">1403</div><div class="line">1404</div><div class="line">1405</div><div class="line">1406</div><div class="line">1407</div><div class="line">1408</div><div class="line">1409</div><div class="line">1410</div><div class="line">1411</div><div class="line">1412</div><div class="line">1413</div><div class="line">1414</div><div class="line">1415</div><div class="line">1416</div><div class="line">1417</div><div class="line">1418</div><div class="line">1419</div><div class="line">1420</div><div class="line">1421</div><div class="line">1422</div><div class="line">1423</div><div class="line">1424</div><div class="line">1425</div><div class="line">1426</div><div class="line">1427</div><div class="line">1428</div><div class="line">1429</div><div class="line">1430</div><div class="line">1431</div><div class="line">1432</div><div class="line">1433</div><div class="line">1434</div><div class="line">1435</div><div class="line">1436</div><div class="line">1437</div><div class="line">1438</div><div class="line">1439</div><div class="line">1440</div><div class="line">1441</div><div class="line">1442</div><div class="line">1443</div><div class="line">1444</div><div class="line">1445</div><div class="line">1446</div><div class="line">1447</div><div class="line">1448</div><div class="line">1449</div><div class="line">1450</div><div class="line">1451</div><div class="line">1452</div><div class="line">1453</div><div class="line">1454</div><div class="line">1455</div><div class="line">1456</div><div class="line">1457</div><div class="line">1458</div><div class="line">1459</div><div class="line">1460</div><div class="line">1461</div><div class="line">1462</div><div class="line">1463</div><div class="line">1464</div><div class="line">1465</div><div class="line">1466</div><div class="line">1467</div><div class="line">1468</div><div class="line">1469</div><div class="line">1470</div><div class="line">1471</div><div class="line">1472</div><div class="line">1473</div><div class="line">1474</div><div class="line">1475</div><div class="line">1476</div><div class="line">1477</div><div class="line">1478</div><div class="line">1479</div><div class="line">1480</div><div class="line">1481</div><div class="line">1482</div><div class="line">1483</div><div class="line">1484</div><div class="line">1485</div><div class="line">1486</div><div class="line">1487</div><div class="line">1488</div><div class="line">1489</div><div class="line">1490</div><div class="line">1491</div><div class="line">1492</div><div class="line">1493</div><div class="line">1494</div><div class="line">1495</div><div class="line">1496</div><div class="line">1497</div><div class="line">1498</div><div class="line">1499</div><div class="line">1500</div><div class="line">1501</div><div class="line">1502</div><div class="line">1503</div><div class="line">1504</div><div class="line">1505</div><div class="line">1506</div><div class="line">1507</div><div class="line">1508</div><div class="line">1509</div><div class="line">1510</div><div class="line">1511</div><div class="line">1512</div><div class="line">1513</div><div class="line">1514</div><div class="line">1515</div><div class="line">1516</div><div class="line">1517</div><div class="line">1518</div><div class="line">1519</div><div class="line">1520</div><div class="line">1521</div><div class="line">1522</div><div class="line">1523</div><div class="line">1524</div><div class="line">1525</div><div class="line">1526</div><div class="line">1527</div><div class="line">1528</div><div class="line">1529</div><div class="line">1530</div><div class="line">1531</div><div class="line">1532</div><div class="line">1533</div><div class="line">1534</div><div class="line">1535</div><div class="line">1536</div><div class="line">1537</div><div class="line">1538</div><div class="line">1539</div><div class="line">1540</div><div class="line">1541</div><div class="line">1542</div><div class="line">1543</div><div class="line">1544</div><div class="line">1545</div><div class="line">1546</div><div class="line">1547</div><div class="line">1548</div><div class="line">1549</div><div class="line">1550</div><div class="line">1551</div><div class="line">1552</div><div class="line">1553</div><div class="line">1554</div><div class="line">1555</div><div class="line">1556</div><div class="line">1557</div><div class="line">1558</div><div class="line">1559</div><div class="line">1560</div><div class="line">1561</div><div class="line">1562</div><div class="line">1563</div><div class="line">1564</div><div class="line">1565</div><div class="line">1566</div><div class="line">1567</div><div class="line">1568</div><div class="line">1569</div><div class="line">1570</div><div class="line">1571</div><div class="line">1572</div><div class="line">1573</div><div class="line">1574</div><div class="line">1575</div><div class="line">1576</div><div class="line">1577</div><div class="line">1578</div><div class="line">1579</div><div class="line">1580</div><div class="line">1581</div><div class="line">1582</div><div class="line">1583</div><div class="line">1584</div><div class="line">1585</div><div class="line">1586</div><div class="line">1587</div><div class="line">1588</div><div class="line">1589</div><div class="line">1590</div><div class="line">1591</div><div class="line">1592</div><div class="line">1593</div><div class="line">1594</div><div class="line">1595</div><div class="line">1596</div><div class="line">1597</div><div class="line">1598</div><div class="line">1599</div><div class="line">1600</div><div class="line">1601</div><div class="line">1602</div><div class="line">1603</div><div class="line">1604</div><div class="line">1605</div><div class="line">1606</div><div class="line">1607</div><div class="line">1608</div><div class="line">1609</div><div class="line">1610</div><div class="line">1611</div><div class="line">1612</div><div class="line">1613</div><div class="line">1614</div><div class="line">1615</div><div class="line">1616</div><div class="line">1617</div><div class="line">1618</div><div class="line">1619</div><div class="line">1620</div><div class="line">1621</div><div class="line">1622</div><div class="line">1623</div><div class="line">1624</div><div class="line">1625</div><div class="line">1626</div><div class="line">1627</div><div class="line">1628</div><div class="line">1629</div><div class="line">1630</div><div class="line">1631</div><div class="line">1632</div><div class="line">1633</div><div class="line">1634</div><div class="line">1635</div><div class="line">1636</div><div class="line">1637</div><div class="line">1638</div><div class="line">1639</div><div class="line">1640</div><div class="line">1641</div><div class="line">1642</div><div class="line">1643</div><div class="line">1644</div><div class="line">1645</div><div class="line">1646</div><div class="line">1647</div><div class="line">1648</div><div class="line">1649</div><div class="line">1650</div><div class="line">1651</div><div class="line">1652</div><div class="line">1653</div><div class="line">1654</div><div class="line">1655</div><div class="line">1656</div><div class="line">1657</div><div class="line">1658</div><div class="line">1659</div><div class="line">1660</div><div class="line">1661</div><div class="line">1662</div><div class="line">1663</div><div class="line">1664</div><div class="line">1665</div><div class="line">1666</div><div class="line">1667</div><div class="line">1668</div><div class="line">1669</div><div class="line">1670</div><div class="line">1671</div><div class="line">1672</div><div class="line">1673</div><div class="line">1674</div><div class="line">1675</div><div class="line">1676</div><div class="line">1677</div><div class="line">1678</div><div class="line">1679</div><div class="line">1680</div><div class="line">1681</div><div class="line">1682</div><div class="line">1683</div><div class="line">1684</div><div class="line">1685</div><div class="line">1686</div><div class="line">1687</div><div class="line">1688</div><div class="line">1689</div><div class="line">1690</div><div class="line">1691</div><div class="line">1692</div><div class="line">1693</div><div class="line">1694</div><div class="line">1695</div><div class="line">1696</div><div class="line">1697</div><div class="line">1698</div><div class="line">1699</div><div class="line">1700</div><div class="line">1701</div><div class="line">1702</div><div class="line">1703</div><div class="line">1704</div><div class="line">1705</div><div class="line">1706</div><div class="line">1707</div><div class="line">1708</div><div class="line">1709</div><div class="line">1710</div><div class="line">1711</div><div class="line">1712</div><div class="line">1713</div><div class="line">1714</div><div class="line">1715</div><div class="line">1716</div><div class="line">1717</div><div class="line">1718</div><div class="line">1719</div><div class="line">1720</div><div class="line">1721</div><div class="line">1722</div><div class="line">1723</div><div class="line">1724</div><div class="line">1725</div><div class="line">1726</div><div class="line">1727</div><div class="line">1728</div><div class="line">1729</div><div class="line">1730</div><div class="line">1731</div><div class="line">1732</div><div class="line">1733</div><div class="line">1734</div><div class="line">1735</div><div class="line">1736</div><div class="line">1737</div><div class="line">1738</div><div class="line">1739</div><div class="line">1740</div><div class="line">1741</div><div class="line">1742</div><div class="line">1743</div><div class="line">1744</div><div class="line">1745</div><div class="line">1746</div><div class="line">1747</div><div class="line">1748</div><div class="line">1749</div><div class="line">1750</div><div class="line">1751</div><div class="line">1752</div><div class="line">1753</div><div class="line">1754</div><div class="line">1755</div><div class="line">1756</div><div class="line">1757</div><div class="line">1758</div><div class="line">1759</div><div class="line">1760</div><div class="line">1761</div><div class="line">1762</div><div class="line">1763</div><div class="line">1764</div><div class="line">1765</div><div class="line">1766</div><div class="line">1767</div><div class="line">1768</div><div class="line">1769</div><div class="line">1770</div><div class="line">1771</div><div class="line">1772</div><div class="line">1773</div><div class="line">1774</div><div class="line">1775</div><div class="line">1776</div><div class="line">1777</div><div class="line">1778</div><div class="line">1779</div><div class="line">1780</div><div class="line">1781</div><div class="line">1782</div><div class="line">1783</div><div class="line">1784</div><div class="line">1785</div><div class="line">1786</div><div class="line">1787</div><div class="line">1788</div><div class="line">1789</div><div class="line">1790</div><div class="line">1791</div><div class="line">1792</div><div class="line">1793</div><div class="line">1794</div><div class="line">1795</div><div class="line">1796</div><div class="line">1797</div><div class="line">1798</div><div class="line">1799</div><div class="line">1800</div><div class="line">1801</div><div class="line">1802</div><div class="line">1803</div><div class="line">1804</div><div class="line">1805</div><div class="line">1806</div><div class="line">1807</div><div class="line">1808</div><div class="line">1809</div><div class="line">1810</div><div class="line">1811</div><div class="line">1812</div><div class="line">1813</div><div class="line">1814</div><div class="line">1815</div><div class="line">1816</div><div class="line">1817</div><div class="line">1818</div><div class="line">1819</div><div class="line">1820</div><div class="line">1821</div><div class="line">1822</div><div class="line">1823</div><div class="line">1824</div><div class="line">1825</div><div class="line">1826</div><div class="line">1827</div><div class="line">1828</div><div class="line">1829</div><div class="line">1830</div><div class="line">1831</div><div class="line">1832</div><div class="line">1833</div><div class="line">1834</div><div class="line">1835</div><div class="line">1836</div><div class="line">1837</div><div class="line">1838</div><div class="line">1839</div><div class="line">1840</div><div class="line">1841</div><div class="line">1842</div><div class="line">1843</div><div class="line">1844</div><div class="line">1845</div><div class="line">1846</div><div class="line">1847</div><div class="line">1848</div><div class="line">1849</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> android.content.Context;</div><div class="line"><span class="keyword">import</span> android.database.DataSetObserver;</div><div class="line"><span class="keyword">import</span> android.graphics.Canvas;</div><div class="line"><span class="keyword">import</span> android.graphics.Rect;</div><div class="line"><span class="keyword">import</span> android.graphics.drawable.Drawable;</div><div class="line"><span class="keyword">import</span> android.os.Parcel;</div><div class="line"><span class="keyword">import</span> android.os.Parcelable;</div><div class="line"><span class="keyword">import</span> android.os.SystemClock;</div><div class="line"><span class="keyword">import</span> android.support.v4.os.ParcelableCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.os.ParcelableCompatCreatorCallbacks;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.KeyEventCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.MotionEventCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.PagerAdapter;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.VelocityTrackerCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.view.ViewConfigurationCompat;</div><div class="line"><span class="keyword">import</span> android.support.v4.widget.EdgeEffectCompat;</div><div class="line"><span class="keyword">import</span> android.util.AttributeSet;</div><div class="line"><span class="keyword">import</span> android.util.Log;</div><div class="line"><span class="keyword">import</span> android.view.FocusFinder;</div><div class="line"><span class="keyword">import</span> android.view.KeyEvent;</div><div class="line"><span class="keyword">import</span> android.view.MotionEvent;</div><div class="line"><span class="keyword">import</span> android.view.SoundEffectConstants;</div><div class="line"><span class="keyword">import</span> android.view.VelocityTracker;</div><div class="line"><span class="keyword">import</span> android.view.View;</div><div class="line"><span class="keyword">import</span> android.view.ViewConfiguration;</div><div class="line"><span class="keyword">import</span> android.view.ViewGroup;</div><div class="line"><span class="keyword">import</span> android.view.ViewParent;</div><div class="line"><span class="keyword">import</span> android.view.accessibility.AccessibilityEvent;</div><div class="line"><span class="keyword">import</span> android.view.animation.Interpolator;</div><div class="line"><span class="keyword">import</span> android.widget.Scroller;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.Collections;</div><div class="line"><span class="keyword">import</span> java.util.Comparator;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * 不缓存的ViewPager</div><div class="line"> * Created by Administrator on 2016/1/26.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NoCacheViewPager</span> <span class="keyword">extends</span> <span class="title">ViewGroup</span> </span>&#123;<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String TAG = <span class="string">"LazyViewPager"</span>;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> DEBUG = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">boolean</span> USE_CACHE = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> DEFAULT_OFFSCREEN_PAGES = <span class="number">0</span>;<span class="comment">// 默认的加载页面,ViewPager是1个,所以会加载两个Fragment</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> MAX_SETTLE_DURATION = <span class="number">600</span>; <span class="comment">// ms</span></div><div class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ItemInfo</span> </span>&#123;</div><div class="line">        Object object;</div><div class="line">        <span class="keyword">int</span> position;</div><div class="line">        <span class="keyword">boolean</span> scrolling;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Comparator&lt;ItemInfo&gt; COMPARATOR = <span class="keyword">new</span> Comparator&lt;ItemInfo&gt;() &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compare</span><span class="params">(ItemInfo lhs, ItemInfo rhs)</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> lhs.position - rhs.position;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Interpolator sInterpolator = <span class="keyword">new</span> Interpolator() &#123;</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">float</span> <span class="title">getInterpolation</span><span class="params">(<span class="keyword">float</span> t)</span> </span>&#123;</div><div class="line">            <span class="comment">// _o(t) = t * t * ((tension + 1) * t + tension)</span></div><div class="line">            <span class="comment">// o(t) = _o(t - 1) + 1</span></div><div class="line">            t -= <span class="number">1.0f</span>;</div><div class="line">            <span class="keyword">return</span> t * t * t + <span class="number">1.0f</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ArrayList&lt;ItemInfo&gt; mItems = <span class="keyword">new</span> ArrayList&lt;ItemInfo&gt;();</div><div class="line"></div><div class="line">    <span class="keyword">private</span> PagerAdapter mAdapter;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mCurItem; <span class="comment">// Index of currently displayed page.</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mRestoredCurItem = -<span class="number">1</span>;</div><div class="line">    <span class="keyword">private</span> Parcelable mRestoredAdapterState = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> ClassLoader mRestoredClassLoader = <span class="keyword">null</span>;</div><div class="line">    <span class="keyword">private</span> Scroller mScroller;</div><div class="line">    <span class="keyword">private</span> PagerObserver mObserver;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mPageMargin;</div><div class="line">    <span class="keyword">private</span> Drawable mMarginDrawable;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mChildWidthMeasureSpec;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mChildHeightMeasureSpec;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mInLayout;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mScrollingCacheEnabled;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mPopulatePending;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mScrolling;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mOffscreenPageLimit = DEFAULT_OFFSCREEN_PAGES;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsBeingDragged;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mIsUnableToDrag;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mTouchSlop;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mInitialMotionX;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Position of the last motion event.</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mLastMotionX;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mLastMotionY;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ID of the active pointer. This is used to retain consistency during</div><div class="line">     * drags/flings if multiple pointers are used.</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mActivePointerId = INVALID_POINTER;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Sentinel value for no current active pointer. Used by</div><div class="line">     * &#123;<span class="doctag">@link</span> #mActivePointerId&#125;.</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> INVALID_POINTER = -<span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Determines speed during touch scrolling</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> VelocityTracker mVelocityTracker;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mMinimumVelocity;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mMaximumVelocity;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mBaseLineFlingVelocity;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">float</span> mFlingVelocityInfluence;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mFakeDragging;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">long</span> mFakeDragBeginTime;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> EdgeEffectCompat mLeftEdge;</div><div class="line">    <span class="keyword">private</span> EdgeEffectCompat mRightEdge;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">boolean</span> mFirstLayout = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> OnPageChangeListener mOnPageChangeListener;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Indicates that the pager is in an idle, settled state. The current page</div><div class="line">     * is fully in view and no animation is in progress.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_STATE_IDLE = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Indicates that the pager is currently being dragged by the user.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_STATE_DRAGGING = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Indicates that the pager is in the process of settling to a final</div><div class="line">     * position.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> SCROLL_STATE_SETTLING = <span class="number">2</span>;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mScrollState = SCROLL_STATE_IDLE;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Callback interface for responding to changing state of the selected page.</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">OnPageChangeListener</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * This method will be invoked when the current page is scrolled, either</div><div class="line">         * as part of a programmatically initiated smooth scroll or a user</div><div class="line">         * initiated touch scroll.</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> position</div><div class="line">         *            Position index of the first page currently being</div><div class="line">         *            displayed. Page position+1 will be visible if</div><div class="line">         *            positionOffset is nonzero.</div><div class="line">         * <span class="doctag">@param</span> positionOffset</div><div class="line">         *            Value from [0, 1) indicating the offset from the page at</div><div class="line">         *            position.</div><div class="line">         * <span class="doctag">@param</span> positionOffsetPixels</div><div class="line">         *            Value in pixels indicating the offset from position.</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">float</span> positionOffset,</span></span></div><div class="line">                                   <span class="keyword">int</span> positionOffsetPixels);</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * This method will be invoked when a new page becomes selected.</div><div class="line">         * Animation is not necessarily complete.</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> position</div><div class="line">         *            Position index of the new selected page.</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span></span>;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * Called when the scroll state changes. Useful for discovering when the</div><div class="line">         * user begins dragging, when the pager is automatically settling to the</div><div class="line">         * current page, or when it is fully stopped/idle.</div><div class="line">         *</div><div class="line">         * <span class="doctag">@param</span> state</div><div class="line">         *            The new scroll state.</div><div class="line">         * <span class="doctag">@see</span> android.support.v4.view.ViewPager#SCROLL_STATE_IDLE</div><div class="line">         * <span class="doctag">@see</span> android.support.v4.view.ViewPager#SCROLL_STATE_DRAGGING</div><div class="line">         * <span class="doctag">@see</span> android.support.v4.view.ViewPager#SCROLL_STATE_SETTLING</div><div class="line">         */</div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> state)</span></span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Simple implementation of the</div><div class="line">     * interface with stub implementations of each method. Extend this if you do</div><div class="line">     * not intend to override every method of</div><div class="line">     */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleOnPageChangeListener</span> <span class="keyword">implements</span></span></div><div class="line">            <span class="title">OnPageChangeListener</span> &#123;</div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrolled</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">float</span> positionOffset,</span></span></div><div class="line">                                   <span class="keyword">int</span> positionOffsetPixels) &#123;</div><div class="line">            <span class="comment">// This space for rent</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageSelected</span><span class="params">(<span class="keyword">int</span> position)</span> </span>&#123;</div><div class="line">            <span class="comment">// This space for rent</span></div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onPageScrollStateChanged</span><span class="params">(<span class="keyword">int</span> state)</span> </span>&#123;</div><div class="line">            <span class="comment">// This space for rent</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NoCacheViewPager</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context);</div><div class="line">        initViewPager();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">NoCacheViewPager</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(context, attrs);</div><div class="line">        initViewPager();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">initViewPager</span><span class="params">()</span> </span>&#123;</div><div class="line">        setWillNotDraw(<span class="keyword">false</span>);</div><div class="line">        setDescendantFocusability(FOCUS_AFTER_DESCENDANTS);</div><div class="line">        setFocusable(<span class="keyword">true</span>);</div><div class="line">        <span class="keyword">final</span> Context context = getContext();</div><div class="line">        mScroller = <span class="keyword">new</span> Scroller(context, sInterpolator);</div><div class="line">        <span class="keyword">final</span> ViewConfiguration configuration = ViewConfiguration.get(context);</div><div class="line">        mTouchSlop = ViewConfigurationCompat</div><div class="line">                .getScaledPagingTouchSlop(configuration);</div><div class="line">        mMinimumVelocity = configuration.getScaledMinimumFlingVelocity();</div><div class="line">        mMaximumVelocity = configuration.getScaledMaximumFlingVelocity();</div><div class="line">        mLeftEdge = <span class="keyword">new</span> EdgeEffectCompat(context);</div><div class="line">        mRightEdge = <span class="keyword">new</span> EdgeEffectCompat(context);</div><div class="line"></div><div class="line">        <span class="keyword">float</span> density = context.getResources().getDisplayMetrics().density;</div><div class="line">        mBaseLineFlingVelocity = <span class="number">2500.0f</span> * density;</div><div class="line">        mFlingVelocityInfluence = <span class="number">0.4f</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setScrollState</span><span class="params">(<span class="keyword">int</span> newState)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mScrollState == newState) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mScrollState = newState;</div><div class="line">        <span class="keyword">if</span> (mOnPageChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">            mOnPageChangeListener.onPageScrollStateChanged(newState);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAdapter</span><span class="params">(PagerAdapter adapter)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span>) &#123;</div><div class="line">            mAdapter.unregisterDataSetObserver(mObserver);</div><div class="line">            mAdapter.startUpdate(<span class="keyword">this</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">                <span class="keyword">final</span> ItemInfo ii = mItems.get(i);</div><div class="line">                mAdapter.destroyItem(<span class="keyword">this</span>, ii.position, ii.object);</div><div class="line">            &#125;</div><div class="line">            mAdapter.finishUpdate(<span class="keyword">this</span>);</div><div class="line">            mItems.clear();</div><div class="line">            removeAllViews();</div><div class="line">            mCurItem = <span class="number">0</span>;</div><div class="line">            scrollTo(<span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mAdapter = adapter;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (mObserver == <span class="keyword">null</span>) &#123;</div><div class="line">                mObserver = <span class="keyword">new</span> PagerObserver();</div><div class="line">            &#125;</div><div class="line">            mAdapter.registerDataSetObserver(mObserver);</div><div class="line">            mPopulatePending = <span class="keyword">false</span>;</div><div class="line">            <span class="keyword">if</span> (mRestoredCurItem &gt;= <span class="number">0</span>) &#123;</div><div class="line">                mAdapter.restoreState(mRestoredAdapterState,</div><div class="line">                        mRestoredClassLoader);</div><div class="line">                setCurrentItemInternal(mRestoredCurItem, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line">                mRestoredCurItem = -<span class="number">1</span>;</div><div class="line">                mRestoredAdapterState = <span class="keyword">null</span>;</div><div class="line">                mRestoredClassLoader = <span class="keyword">null</span>;</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                populate();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> PagerAdapter <span class="title">getAdapter</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mAdapter;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Set the currently selected page. If the ViewPager has already been</div><div class="line">     * through its first layout there will be a smooth animated transition</div><div class="line">     * between the current item and the specified item.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> item</div><div class="line">     *            Item index to select</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrentItem</span><span class="params">(<span class="keyword">int</span> item)</span> </span>&#123;</div><div class="line">        mPopulatePending = <span class="keyword">false</span>;</div><div class="line">        setCurrentItemInternal(item, !mFirstLayout, <span class="keyword">false</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Set the currently selected page.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> item</div><div class="line">     *            Item index to select</div><div class="line">     * <span class="doctag">@param</span> smoothScroll</div><div class="line">     *            True to smoothly scroll to the new item, false to transition</div><div class="line">     *            immediately</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setCurrentItem</span><span class="params">(<span class="keyword">int</span> item, <span class="keyword">boolean</span> smoothScroll)</span> </span>&#123;</div><div class="line">        mPopulatePending = <span class="keyword">false</span>;</div><div class="line">        setCurrentItemInternal(item, smoothScroll, <span class="keyword">false</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCurrentItem</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mCurItem;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setCurrentItemInternal</span><span class="params">(<span class="keyword">int</span> item, <span class="keyword">boolean</span> smoothScroll, <span class="keyword">boolean</span> always)</span> </span>&#123;</div><div class="line">        setCurrentItemInternal(item, smoothScroll, always, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setCurrentItemInternal</span><span class="params">(<span class="keyword">int</span> item, <span class="keyword">boolean</span> smoothScroll, <span class="keyword">boolean</span> always,</span></span></div><div class="line">                                <span class="keyword">int</span> velocity) &#123;</div><div class="line">        <span class="keyword">if</span> (mAdapter == <span class="keyword">null</span> || mAdapter.getCount() &lt;= <span class="number">0</span>) &#123;</div><div class="line">            setScrollingCacheEnabled(<span class="keyword">false</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (!always &amp;&amp; mCurItem == item &amp;&amp; mItems.size() != <span class="number">0</span>) &#123;</div><div class="line">            setScrollingCacheEnabled(<span class="keyword">false</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (item &lt; <span class="number">0</span>) &#123;</div><div class="line">            item = <span class="number">0</span>;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (item &gt;= mAdapter.getCount()) &#123;</div><div class="line">            item = mAdapter.getCount() - <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> pageLimit = mOffscreenPageLimit;</div><div class="line">        <span class="keyword">if</span> (item &gt; (mCurItem + pageLimit) || item &lt; (mCurItem - pageLimit)) &#123;</div><div class="line">            <span class="comment">// We are doing a jump by more than one page. To avoid</span></div><div class="line">            <span class="comment">// glitches, we want to keep all current pages in the view</span></div><div class="line">            <span class="comment">// until the scroll ends.</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">                mItems.get(i).scrolling = <span class="keyword">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">boolean</span> dispatchSelected = mCurItem != item;</div><div class="line">        mCurItem = item;</div><div class="line">        populate();</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> destX = (getWidth() + mPageMargin) * item;</div><div class="line">        <span class="keyword">if</span> (smoothScroll) &#123;</div><div class="line">            smoothScrollTo(destX, <span class="number">0</span>, velocity);</div><div class="line">            <span class="keyword">if</span> (dispatchSelected &amp;&amp; mOnPageChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">                mOnPageChangeListener.onPageSelected(item);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">if</span> (dispatchSelected &amp;&amp; mOnPageChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">                mOnPageChangeListener.onPageSelected(item);</div><div class="line">            &#125;</div><div class="line">            completeScroll();</div><div class="line">            scrollTo(destX, <span class="number">0</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOnPageChangeListener</span><span class="params">(OnPageChangeListener listener)</span> </span>&#123;</div><div class="line">        mOnPageChangeListener = listener;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns the number of pages that will be retained to either side of the</div><div class="line">     * current page in the view hierarchy in an idle state. Defaults to 1.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> How many pages will be kept offscreen on either side</div><div class="line">     * <span class="doctag">@see</span> #setOffscreenPageLimit(int)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getOffscreenPageLimit</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mOffscreenPageLimit;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Set the number of pages that should be retained to either side of the</div><div class="line">     * current page in the view hierarchy in an idle state. Pages beyond this</div><div class="line">     * limit will be recreated from the adapter when needed.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;</div><div class="line">     * This is offered as an optimization. If you know in advance the number of</div><div class="line">     * pages you will need to support or have lazy-loading mechanisms in place</div><div class="line">     * on your pages, tweaking this setting can have benefits in perceived</div><div class="line">     * smoothness of paging animations and interaction. If you have a small</div><div class="line">     * number of pages (3-4) that you can keep active all at once, less time</div><div class="line">     * will be spent in layout for newly created view subtrees as the user pages</div><div class="line">     * back and forth.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * &lt;p&gt;</div><div class="line">     * You should keep this limit low, especially if your pages have complex</div><div class="line">     * layouts. This setting defaults to 1.</div><div class="line">     * &lt;/p&gt;</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> limit</div><div class="line">     *            How many pages will be kept offscreen in an idle state.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOffscreenPageLimit</span><span class="params">(<span class="keyword">int</span> limit)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (limit &lt; DEFAULT_OFFSCREEN_PAGES) &#123;</div><div class="line">            Log.w(TAG, <span class="string">"Requested offscreen page limit "</span> + limit</div><div class="line">                    + <span class="string">" too small; defaulting to "</span> + DEFAULT_OFFSCREEN_PAGES);</div><div class="line">            limit = DEFAULT_OFFSCREEN_PAGES;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (limit != mOffscreenPageLimit) &#123;</div><div class="line">            mOffscreenPageLimit = limit;</div><div class="line">            populate();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Set the margin between pages.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> marginPixels</div><div class="line">     *            Distance between adjacent pages in pixels</div><div class="line">     * <span class="doctag">@see</span> #getPageMargin()</div><div class="line">     * <span class="doctag">@see</span> #setPageMarginDrawable(Drawable)</div><div class="line">     * <span class="doctag">@see</span> #setPageMarginDrawable(int)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageMargin</span><span class="params">(<span class="keyword">int</span> marginPixels)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> oldMargin = mPageMargin;</div><div class="line">        mPageMargin = marginPixels;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> width = getWidth();</div><div class="line">        recomputeScrollPosition(width, width, marginPixels, oldMargin);</div><div class="line"></div><div class="line">        requestLayout();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Return the margin between pages.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> The size of the margin in pixels</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getPageMargin</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mPageMargin;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Set a drawable that will be used to fill the margin between pages.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> d</div><div class="line">     *            Drawable to display between pages</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageMarginDrawable</span><span class="params">(Drawable d)</span> </span>&#123;</div><div class="line">        mMarginDrawable = d;</div><div class="line">        <span class="keyword">if</span> (d != <span class="keyword">null</span>)</div><div class="line">            refreshDrawableState();</div><div class="line">        setWillNotDraw(d == <span class="keyword">null</span>);</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Set a drawable that will be used to fill the margin between pages.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> resId</div><div class="line">     *            Resource ID of a drawable to display between pages</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPageMarginDrawable</span><span class="params">(<span class="keyword">int</span> resId)</span> </span>&#123;</div><div class="line">        setPageMarginDrawable(getContext().getResources().getDrawable(resId));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">verifyDrawable</span><span class="params">(Drawable who)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.verifyDrawable(who) || who == mMarginDrawable;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">drawableStateChanged</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.drawableStateChanged();</div><div class="line">        <span class="keyword">final</span> Drawable d = mMarginDrawable;</div><div class="line">        <span class="keyword">if</span> (d != <span class="keyword">null</span> &amp;&amp; d.isStateful()) &#123;</div><div class="line">            d.setState(getDrawableState());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// We want the duration of the page snap animation to be influenced by the</span></div><div class="line">    <span class="comment">// distance that</span></div><div class="line">    <span class="comment">// the screen has to travel, however, we don't want this duration to be</span></div><div class="line">    <span class="comment">// effected in a</span></div><div class="line">    <span class="comment">// purely linear fashion. Instead, we use this method to moderate the effect</span></div><div class="line">    <span class="comment">// that the distance</span></div><div class="line">    <span class="comment">// of travel has on the overall snap duration.</span></div><div class="line">    <span class="function"><span class="keyword">float</span> <span class="title">distanceInfluenceForSnapDuration</span><span class="params">(<span class="keyword">float</span> f)</span> </span>&#123;</div><div class="line">        f -= <span class="number">0.5f</span>; <span class="comment">// center the values about 0.</span></div><div class="line">        f *= <span class="number">0.3f</span> * Math.PI / <span class="number">2.0f</span>;</div><div class="line">        <span class="keyword">return</span> (<span class="keyword">float</span>) Math.sin(f);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Like &#123;<span class="doctag">@link</span> View#scrollBy&#125;, but scroll smoothly instead of</div><div class="line">     * immediately.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> x</div><div class="line">     *            the number of pixels to scroll by on the X axis</div><div class="line">     * <span class="doctag">@param</span> y</div><div class="line">     *            the number of pixels to scroll by on the Y axis</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">smoothScrollTo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        smoothScrollTo(x, y, <span class="number">0</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Like &#123;<span class="doctag">@link</span> View#scrollBy&#125;, but scroll smoothly instead of</div><div class="line">     * immediately.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> x</div><div class="line">     *            the number of pixels to scroll by on the X axis</div><div class="line">     * <span class="doctag">@param</span> y</div><div class="line">     *            the number of pixels to scroll by on the Y axis</div><div class="line">     * <span class="doctag">@param</span> velocity</div><div class="line">     *            the velocity associated with a fling, if applicable. (0</div><div class="line">     *            otherwise)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">smoothScrollTo</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> velocity)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (getChildCount() == <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// Nothing to do.</span></div><div class="line">            setScrollingCacheEnabled(<span class="keyword">false</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">int</span> sx = getScrollX();</div><div class="line">        <span class="keyword">int</span> sy = getScrollY();</div><div class="line">        <span class="keyword">int</span> dx = x - sx;</div><div class="line">        <span class="keyword">int</span> dy = y - sy;</div><div class="line">        <span class="keyword">if</span> (dx == <span class="number">0</span> &amp;&amp; dy == <span class="number">0</span>) &#123;</div><div class="line">            completeScroll();</div><div class="line">            setScrollState(SCROLL_STATE_IDLE);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        setScrollingCacheEnabled(<span class="keyword">true</span>);</div><div class="line">        mScrolling = <span class="keyword">true</span>;</div><div class="line">        setScrollState(SCROLL_STATE_SETTLING);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">float</span> pageDelta = (<span class="keyword">float</span>) Math.abs(dx)</div><div class="line">                / (getWidth() + mPageMargin);</div><div class="line">        <span class="keyword">int</span> duration = (<span class="keyword">int</span>) (pageDelta * <span class="number">100</span>);</div><div class="line"></div><div class="line">        velocity = Math.abs(velocity);</div><div class="line">        <span class="keyword">if</span> (velocity &gt; <span class="number">0</span>) &#123;</div><div class="line">            duration += (duration / (velocity / mBaseLineFlingVelocity))</div><div class="line">                    * mFlingVelocityInfluence;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            duration += <span class="number">100</span>;</div><div class="line">        &#125;</div><div class="line">        duration = Math.min(duration, MAX_SETTLE_DURATION);</div><div class="line"></div><div class="line">        mScroller.startScroll(sx, sy, dx, dy, duration);</div><div class="line">        invalidate();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">addNewItem</span><span class="params">(<span class="keyword">int</span> position, <span class="keyword">int</span> index)</span> </span>&#123;</div><div class="line">        ItemInfo ii = <span class="keyword">new</span> ItemInfo();</div><div class="line">        ii.position = position;</div><div class="line">        ii.object = mAdapter.instantiateItem(<span class="keyword">this</span>, position);</div><div class="line">        <span class="keyword">if</span> (index &lt; <span class="number">0</span>) &#123;</div><div class="line">            mItems.add(ii);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mItems.add(index, ii);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">dataSetChanged</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// This method only gets called if our observer is attached, so mAdapter</span></div><div class="line">        <span class="comment">// is non-null.</span></div><div class="line"></div><div class="line">        <span class="keyword">boolean</span> needPopulate = mItems.size() &lt; <span class="number">3</span></div><div class="line">                &amp;&amp; mItems.size() &lt; mAdapter.getCount();</div><div class="line">        <span class="keyword">int</span> newCurrItem = -<span class="number">1</span>;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">            <span class="keyword">final</span> ItemInfo ii = mItems.get(i);</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> newPos = mAdapter.getItemPosition(ii.object);</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (newPos == PagerAdapter.POSITION_UNCHANGED) &#123;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (newPos == PagerAdapter.POSITION_NONE) &#123;</div><div class="line">                mItems.remove(i);</div><div class="line">                i--;</div><div class="line">                mAdapter.destroyItem(<span class="keyword">this</span>, ii.position, ii.object);</div><div class="line">                needPopulate = <span class="keyword">true</span>;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (mCurItem == ii.position) &#123;</div><div class="line">                    <span class="comment">// Keep the current item in the valid range</span></div><div class="line">                    newCurrItem = Math.max(<span class="number">0</span>,</div><div class="line">                            Math.min(mCurItem, mAdapter.getCount() - <span class="number">1</span>));</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">continue</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">if</span> (ii.position != newPos) &#123;</div><div class="line">                <span class="keyword">if</span> (ii.position == mCurItem) &#123;</div><div class="line">                    <span class="comment">// Our current item changed position. Follow it.</span></div><div class="line">                    newCurrItem = newPos;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                ii.position = newPos;</div><div class="line">                needPopulate = <span class="keyword">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        Collections.sort(mItems, COMPARATOR);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (newCurrItem &gt;= <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// TODO This currently causes a jump.</span></div><div class="line">            setCurrentItemInternal(newCurrItem, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line">            needPopulate = <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (needPopulate) &#123;</div><div class="line">            populate();</div><div class="line">            requestLayout();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">populate</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mAdapter == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Bail now if we are waiting to populate. This is to hold off</span></div><div class="line">        <span class="comment">// on creating views from the time the user releases their finger to</span></div><div class="line">        <span class="comment">// fling to a new position until we have finished the scroll to</span></div><div class="line">        <span class="comment">// that position, avoiding glitches from happening at that point.</span></div><div class="line">        <span class="keyword">if</span> (mPopulatePending) &#123;</div><div class="line">            <span class="keyword">if</span> (DEBUG)</div><div class="line">                Log.i(TAG, <span class="string">"populate is pending, skipping for now..."</span>);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Also, don't populate until we are attached to a window. This is to</span></div><div class="line">        <span class="comment">// avoid trying to populate before we have restored our view hierarchy</span></div><div class="line">        <span class="comment">// state and conflicting with what is restored.</span></div><div class="line">        <span class="keyword">if</span> (getWindowToken() == <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mAdapter.startUpdate(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> pageLimit = mOffscreenPageLimit;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> startPos = Math.max(<span class="number">0</span>, mCurItem - pageLimit);</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> N = mAdapter.getCount();</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> endPos = Math.min(N - <span class="number">1</span>, mCurItem + pageLimit);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (DEBUG)</div><div class="line">            Log.v(TAG, <span class="string">"populating: startPos="</span> + startPos + <span class="string">" endPos="</span> + endPos);</div><div class="line"></div><div class="line">        <span class="comment">// Add and remove pages in the existing list.</span></div><div class="line">        <span class="keyword">int</span> lastPos = -<span class="number">1</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">            ItemInfo ii = mItems.get(i);</div><div class="line">            <span class="keyword">if</span> ((ii.position &lt; startPos || ii.position &gt; endPos)</div><div class="line">                    &amp;&amp; !ii.scrolling) &#123;</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.i(TAG, <span class="string">"removing: "</span> + ii.position + <span class="string">" @ "</span> + i);</div><div class="line">                mItems.remove(i);</div><div class="line">                i--;</div><div class="line">                mAdapter.destroyItem(<span class="keyword">this</span>, ii.position, ii.object);</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (lastPos &lt; endPos &amp;&amp; ii.position &gt; startPos) &#123;</div><div class="line">                <span class="comment">// The next item is outside of our range, but we have a gap</span></div><div class="line">                <span class="comment">// between it and the last item where we want to have a page</span></div><div class="line">                <span class="comment">// shown. Fill in the gap.</span></div><div class="line">                lastPos++;</div><div class="line">                <span class="keyword">if</span> (lastPos &lt; startPos) &#123;</div><div class="line">                    lastPos = startPos;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">while</span> (lastPos &lt;= endPos &amp;&amp; lastPos &lt; ii.position) &#123;</div><div class="line">                    <span class="keyword">if</span> (DEBUG)</div><div class="line">                        Log.i(TAG, <span class="string">"inserting: "</span> + lastPos + <span class="string">" @ "</span> + i);</div><div class="line">                    addNewItem(lastPos, i);</div><div class="line">                    lastPos++;</div><div class="line">                    i++;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">            lastPos = ii.position;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Add any new pages we need at the end.</span></div><div class="line">        lastPos = mItems.size() &gt; <span class="number">0</span> ? mItems.get(mItems.size() - <span class="number">1</span>).position</div><div class="line">                : -<span class="number">1</span>;</div><div class="line">        <span class="keyword">if</span> (lastPos &lt; endPos) &#123;</div><div class="line">            lastPos++;</div><div class="line">            lastPos = lastPos &gt; startPos ? lastPos : startPos;</div><div class="line">            <span class="keyword">while</span> (lastPos &lt;= endPos) &#123;</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.i(TAG, <span class="string">"appending: "</span> + lastPos);</div><div class="line">                addNewItem(lastPos, -<span class="number">1</span>);</div><div class="line">                lastPos++;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (DEBUG) &#123;</div><div class="line">            Log.i(TAG, <span class="string">"Current page list:"</span>);</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">                Log.i(TAG, <span class="string">"#"</span> + i + <span class="string">": page "</span> + mItems.get(i).position);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        ItemInfo curItem = <span class="keyword">null</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">            <span class="keyword">if</span> (mItems.get(i).position == mCurItem) &#123;</div><div class="line">                curItem = mItems.get(i);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        mAdapter.setPrimaryItem(<span class="keyword">this</span>, mCurItem,</div><div class="line">                curItem != <span class="keyword">null</span> ? curItem.object : <span class="keyword">null</span>);</div><div class="line"></div><div class="line">        mAdapter.finishUpdate(<span class="keyword">this</span>);</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (hasFocus()) &#123;</div><div class="line">            View currentFocused = findFocus();</div><div class="line">            ItemInfo ii = currentFocused != <span class="keyword">null</span> ? infoForAnyChild(currentFocused)</div><div class="line">                    : <span class="keyword">null</span>;</div><div class="line">            <span class="keyword">if</span> (ii == <span class="keyword">null</span> || ii.position != mCurItem) &#123;</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; getChildCount(); i++) &#123;</div><div class="line">                    View child = getChildAt(i);</div><div class="line">                    ii = infoForChild(child);</div><div class="line">                    <span class="keyword">if</span> (ii != <span class="keyword">null</span> &amp;&amp; ii.position == mCurItem) &#123;</div><div class="line">                        <span class="keyword">if</span> (child.requestFocus(FOCUS_FORWARD)) &#123;</div><div class="line">                            <span class="keyword">break</span>;</div><div class="line">                        &#125;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SavedState</span> <span class="keyword">extends</span> <span class="title">BaseSavedState</span> </span>&#123;</div><div class="line">        <span class="keyword">int</span> position;</div><div class="line">        Parcelable adapterState;</div><div class="line">        ClassLoader loader;</div><div class="line"></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="title">SavedState</span><span class="params">(Parcelable superState)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>(superState);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">writeToParcel</span><span class="params">(Parcel out, <span class="keyword">int</span> flags)</span> </span>&#123;</div><div class="line">            <span class="keyword">super</span>.writeToParcel(out, flags);</div><div class="line">            out.writeInt(position);</div><div class="line">            out.writeParcelable(adapterState, flags);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">            <span class="keyword">return</span> <span class="string">"FragmentPager.SavedState&#123;"</span></div><div class="line">                    + Integer.toHexString(System.identityHashCode(<span class="keyword">this</span>))</div><div class="line">                    + <span class="string">" position="</span> + position + <span class="string">"&#125;"</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Creator&lt;SavedState&gt; CREATOR = ParcelableCompat</div><div class="line">                .newCreator(<span class="keyword">new</span> ParcelableCompatCreatorCallbacks&lt;SavedState&gt;() &#123;</div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="function"><span class="keyword">public</span> SavedState <span class="title">createFromParcel</span><span class="params">(Parcel in,</span></span></div><div class="line">                                                       ClassLoader loader) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> SavedState(in, loader);</div><div class="line">                    &#125;</div><div class="line"></div><div class="line">                    <span class="meta">@Override</span></div><div class="line">                    <span class="keyword">public</span> SavedState[] newArray(<span class="keyword">int</span> size) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="keyword">new</span> SavedState[size];</div><div class="line">                    &#125;</div><div class="line">                &#125;);</div><div class="line"></div><div class="line">        SavedState(Parcel in, ClassLoader loader) &#123;</div><div class="line">            <span class="keyword">super</span>(in);</div><div class="line">            <span class="keyword">if</span> (loader == <span class="keyword">null</span>) &#123;</div><div class="line">                loader = getClass().getClassLoader();</div><div class="line">            &#125;</div><div class="line">            position = in.readInt();</div><div class="line">            adapterState = in.readParcelable(loader);</div><div class="line">            <span class="keyword">this</span>.loader = loader;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Parcelable <span class="title">onSaveInstanceState</span><span class="params">()</span> </span>&#123;</div><div class="line">        Parcelable superState = <span class="keyword">super</span>.onSaveInstanceState();</div><div class="line">        SavedState ss = <span class="keyword">new</span> SavedState(superState);</div><div class="line">        ss.position = mCurItem;</div><div class="line">        <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span>) &#123;</div><div class="line">            ss.adapterState = mAdapter.saveState();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> ss;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRestoreInstanceState</span><span class="params">(Parcelable state)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!(state <span class="keyword">instanceof</span> SavedState)) &#123;</div><div class="line">            <span class="keyword">super</span>.onRestoreInstanceState(state);</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        SavedState ss = (SavedState) state;</div><div class="line">        <span class="keyword">super</span>.onRestoreInstanceState(ss.getSuperState());</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span>) &#123;</div><div class="line">            mAdapter.restoreState(ss.adapterState, ss.loader);</div><div class="line">            setCurrentItemInternal(ss.position, <span class="keyword">false</span>, <span class="keyword">true</span>);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mRestoredCurItem = ss.position;</div><div class="line">            mRestoredAdapterState = ss.adapterState;</div><div class="line">            mRestoredClassLoader = ss.loader;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addView</span><span class="params">(View child, <span class="keyword">int</span> index, LayoutParams params)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mInLayout) &#123;</div><div class="line">            addViewInLayout(child, index, params);</div><div class="line">            child.measure(mChildWidthMeasureSpec, mChildHeightMeasureSpec);</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">super</span>.addView(child, index, params);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (USE_CACHE) &#123;</div><div class="line">            <span class="keyword">if</span> (child.getVisibility() != GONE) &#123;</div><div class="line">                child.setDrawingCacheEnabled(mScrollingCacheEnabled);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                child.setDrawingCacheEnabled(<span class="keyword">false</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function">ItemInfo <span class="title">infoForChild</span><span class="params">(View child)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">            ItemInfo ii = mItems.get(i);</div><div class="line">            <span class="keyword">if</span> (mAdapter.isViewFromObject(child, ii.object)) &#123;</div><div class="line">                <span class="keyword">return</span> ii;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function">ItemInfo <span class="title">infoForAnyChild</span><span class="params">(View child)</span> </span>&#123;</div><div class="line">        ViewParent parent;</div><div class="line">        <span class="keyword">while</span> ((parent = child.getParent()) != <span class="keyword">this</span>) &#123;</div><div class="line">            <span class="keyword">if</span> (parent == <span class="keyword">null</span> || !(parent <span class="keyword">instanceof</span> View)) &#123;</div><div class="line">                <span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">            &#125;</div><div class="line">            child = (View) parent;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> infoForChild(child);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onAttachedToWindow</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onAttachedToWindow();</div><div class="line">        mFirstLayout = <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onMeasure</span><span class="params">(<span class="keyword">int</span> widthMeasureSpec, <span class="keyword">int</span> heightMeasureSpec)</span> </span>&#123;</div><div class="line">        <span class="comment">// For simple implementation, or internal size is always 0.</span></div><div class="line">        <span class="comment">// We depend on the container to specify the layout size of</span></div><div class="line">        <span class="comment">// our view. We can't really know what it is since we will be</span></div><div class="line">        <span class="comment">// adding and removing different arbitrary views and do not</span></div><div class="line">        <span class="comment">// want the layout to change as this happens.</span></div><div class="line">        setMeasuredDimension(getDefaultSize(<span class="number">0</span>, widthMeasureSpec),</div><div class="line">                getDefaultSize(<span class="number">0</span>, heightMeasureSpec));</div><div class="line"></div><div class="line">        <span class="comment">// Children are just made to fill our space.</span></div><div class="line">        mChildWidthMeasureSpec = MeasureSpec.makeMeasureSpec(getMeasuredWidth()</div><div class="line">                - getPaddingLeft() - getPaddingRight(), MeasureSpec.EXACTLY);</div><div class="line">        mChildHeightMeasureSpec = MeasureSpec.makeMeasureSpec(</div><div class="line">                getMeasuredHeight() - getPaddingTop() - getPaddingBottom(),</div><div class="line">                MeasureSpec.EXACTLY);</div><div class="line"></div><div class="line">        <span class="comment">// Make sure we have created all fragments that we need to have shown.</span></div><div class="line">        mInLayout = <span class="keyword">true</span>;</div><div class="line">        populate();</div><div class="line">        mInLayout = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="comment">// Make sure all children have been properly measured.</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> size = getChildCount();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</div><div class="line">            <span class="keyword">final</span> View child = getChildAt(i);</div><div class="line">            <span class="keyword">if</span> (child.getVisibility() != GONE) &#123;</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.v(TAG, <span class="string">"Measuring #"</span> + i + <span class="string">" "</span> + child + <span class="string">": "</span></div><div class="line">                            + mChildWidthMeasureSpec);</div><div class="line">                child.measure(mChildWidthMeasureSpec, mChildHeightMeasureSpec);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSizeChanged</span><span class="params">(<span class="keyword">int</span> w, <span class="keyword">int</span> h, <span class="keyword">int</span> oldw, <span class="keyword">int</span> oldh)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onSizeChanged(w, h, oldw, oldh);</div><div class="line"></div><div class="line">        <span class="comment">// Make sure scroll position is set correctly.</span></div><div class="line">        <span class="keyword">if</span> (w != oldw) &#123;</div><div class="line">            recomputeScrollPosition(w, oldw, mPageMargin, mPageMargin);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">recomputeScrollPosition</span><span class="params">(<span class="keyword">int</span> width, <span class="keyword">int</span> oldWidth, <span class="keyword">int</span> margin,</span></span></div><div class="line">                                         <span class="keyword">int</span> oldMargin) &#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> widthWithMargin = width + margin;</div><div class="line">        <span class="keyword">if</span> (oldWidth &gt; <span class="number">0</span>) &#123;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> oldScrollPos = getScrollX();</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> oldwwm = oldWidth + oldMargin;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> oldScrollItem = oldScrollPos / oldwwm;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">float</span> scrollOffset = (<span class="keyword">float</span>) (oldScrollPos % oldwwm) / oldwwm;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> scrollPos = (<span class="keyword">int</span>) ((oldScrollItem + scrollOffset) * widthWithMargin);</div><div class="line">            scrollTo(scrollPos, getScrollY());</div><div class="line">            <span class="keyword">if</span> (!mScroller.isFinished()) &#123;</div><div class="line">                <span class="comment">// We now return to your regularly scheduled scroll, already in</span></div><div class="line">                <span class="comment">// progress.</span></div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> newDuration = mScroller.getDuration()</div><div class="line">                        - mScroller.timePassed();</div><div class="line">                mScroller.startScroll(scrollPos, <span class="number">0</span>, mCurItem * widthWithMargin,</div><div class="line">                        <span class="number">0</span>, newDuration);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            <span class="keyword">int</span> scrollPos = mCurItem * widthWithMargin;</div><div class="line">            <span class="keyword">if</span> (scrollPos != getScrollX()) &#123;</div><div class="line">                completeScroll();</div><div class="line">                scrollTo(scrollPos, getScrollY());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onLayout</span><span class="params">(<span class="keyword">boolean</span> changed, <span class="keyword">int</span> l, <span class="keyword">int</span> t, <span class="keyword">int</span> r, <span class="keyword">int</span> b)</span> </span>&#123;</div><div class="line">        mInLayout = <span class="keyword">true</span>;</div><div class="line">        populate();</div><div class="line">        mInLayout = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> count = getChildCount();</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> width = r - l;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</div><div class="line">            View child = getChildAt(i);</div><div class="line">            ItemInfo ii;</div><div class="line">            <span class="keyword">if</span> (child.getVisibility() != GONE</div><div class="line">                    &amp;&amp; (ii = infoForChild(child)) != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">int</span> loff = (width + mPageMargin) * ii.position;</div><div class="line">                <span class="keyword">int</span> childLeft = getPaddingLeft() + loff;</div><div class="line">                <span class="keyword">int</span> childTop = getPaddingTop();</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.v(TAG,</div><div class="line">                            <span class="string">"Positioning #"</span> + i + <span class="string">" "</span> + child + <span class="string">" f="</span></div><div class="line">                                    + ii.object + <span class="string">":"</span> + childLeft + <span class="string">","</span></div><div class="line">                                    + childTop + <span class="string">" "</span> + child.getMeasuredWidth()</div><div class="line">                                    + <span class="string">"x"</span> + child.getMeasuredHeight());</div><div class="line">                child.layout(childLeft, childTop,</div><div class="line">                        childLeft + child.getMeasuredWidth(),</div><div class="line">                        childTop + child.getMeasuredHeight());</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        mFirstLayout = <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">computeScroll</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (DEBUG)</div><div class="line">            Log.i(TAG, <span class="string">"computeScroll: finished="</span> + mScroller.isFinished());</div><div class="line">        <span class="keyword">if</span> (!mScroller.isFinished()) &#123;</div><div class="line">            <span class="keyword">if</span> (mScroller.computeScrollOffset()) &#123;</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.i(TAG, <span class="string">"computeScroll: still scrolling"</span>);</div><div class="line">                <span class="keyword">int</span> oldX = getScrollX();</div><div class="line">                <span class="keyword">int</span> oldY = getScrollY();</div><div class="line">                <span class="keyword">int</span> x = mScroller.getCurrX();</div><div class="line">                <span class="keyword">int</span> y = mScroller.getCurrY();</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (oldX != x || oldY != y) &#123;</div><div class="line">                    scrollTo(x, y);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (mOnPageChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> widthWithMargin = getWidth() + mPageMargin;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> position = x / widthWithMargin;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> offsetPixels = x % widthWithMargin;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> offset = (<span class="keyword">float</span>) offsetPixels / widthWithMargin;</div><div class="line">                    mOnPageChangeListener.onPageScrolled(position, offset,</div><div class="line">                            offsetPixels);</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="comment">// Keep on drawing until the animation has finished.</span></div><div class="line">                invalidate();</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Done with scroll, clean up state.</span></div><div class="line">        completeScroll();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">completeScroll</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">boolean</span> needPopulate = mScrolling;</div><div class="line">        <span class="keyword">if</span> (needPopulate) &#123;</div><div class="line">            <span class="comment">// Done with scroll, no longer want to cache view drawing.</span></div><div class="line">            setScrollingCacheEnabled(<span class="keyword">false</span>);</div><div class="line">            mScroller.abortAnimation();</div><div class="line">            <span class="keyword">int</span> oldX = getScrollX();</div><div class="line">            <span class="keyword">int</span> oldY = getScrollY();</div><div class="line">            <span class="keyword">int</span> x = mScroller.getCurrX();</div><div class="line">            <span class="keyword">int</span> y = mScroller.getCurrY();</div><div class="line">            <span class="keyword">if</span> (oldX != x || oldY != y) &#123;</div><div class="line">                scrollTo(x, y);</div><div class="line">            &#125;</div><div class="line">            setScrollState(SCROLL_STATE_IDLE);</div><div class="line">        &#125;</div><div class="line">        mPopulatePending = <span class="keyword">false</span>;</div><div class="line">        mScrolling = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mItems.size(); i++) &#123;</div><div class="line">            ItemInfo ii = mItems.get(i);</div><div class="line">            <span class="keyword">if</span> (ii.scrolling) &#123;</div><div class="line">                needPopulate = <span class="keyword">true</span>;</div><div class="line">                ii.scrolling = <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (needPopulate) &#123;</div><div class="line">            populate();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onInterceptTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">		<span class="comment">/*</span></div><div class="line">		 * This method JUST determines whether we want to intercept the motion.</div><div class="line">		 * If we return true, onMotionEvent will be called and we do the actual</div><div class="line">		 * scrolling there.</div><div class="line">		 */</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> action = ev.getAction() &amp; MotionEventCompat.ACTION_MASK;</div><div class="line"></div><div class="line">        <span class="comment">// Always take care of the touch gesture being complete.</span></div><div class="line">        <span class="keyword">if</span> (action == MotionEvent.ACTION_CANCEL</div><div class="line">                || action == MotionEvent.ACTION_UP) &#123;</div><div class="line">            <span class="comment">// Release the drag.</span></div><div class="line">            <span class="keyword">if</span> (DEBUG)</div><div class="line">                Log.v(TAG, <span class="string">"Intercept done!"</span>);</div><div class="line">            mIsBeingDragged = <span class="keyword">false</span>;</div><div class="line">            mIsUnableToDrag = <span class="keyword">false</span>;</div><div class="line">            mActivePointerId = INVALID_POINTER;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Nothing more to do here if we have decided whether or not we</span></div><div class="line">        <span class="comment">// are dragging.</span></div><div class="line">        <span class="keyword">if</span> (action != MotionEvent.ACTION_DOWN) &#123;</div><div class="line">            <span class="keyword">if</span> (mIsBeingDragged) &#123;</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.v(TAG, <span class="string">"Intercept returning true!"</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (mIsUnableToDrag) &#123;</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.v(TAG, <span class="string">"Intercept returning false!"</span>);</div><div class="line">                <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">switch</span> (action) &#123;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE: &#123;</div><div class="line">			<span class="comment">/*</span></div><div class="line">			 * mIsBeingDragged == false, otherwise the shortcut would have</div><div class="line">			 * caught it. Check whether the user has moved far enough from his</div><div class="line">			 * original down touch.</div><div class="line">			 */</div><div class="line"></div><div class="line">			<span class="comment">/*</span></div><div class="line">			 * Locally do absolute value. mLastMotionY is set to the y value of</div><div class="line">			 * the down event.</div><div class="line">			 */</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> activePointerId = mActivePointerId;</div><div class="line">                <span class="keyword">if</span> (activePointerId == INVALID_POINTER) &#123;</div><div class="line">                    <span class="comment">// If we don't have a valid id, the touch down wasn't on</span></div><div class="line">                    <span class="comment">// content.</span></div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> pointerIndex = MotionEventCompat.findPointerIndex(ev,</div><div class="line">                        activePointerId);</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> x = MotionEventCompat.getX(ev, pointerIndex);</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> dx = x - mLastMotionX;</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> xDiff = Math.abs(dx);</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> y = MotionEventCompat.getY(ev, pointerIndex);</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> yDiff = Math.abs(y - mLastMotionY);</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> scrollX = getScrollX();</div><div class="line">                <span class="keyword">final</span> <span class="keyword">boolean</span> atEdge = (dx &gt; <span class="number">0</span> &amp;&amp; scrollX == <span class="number">0</span>)</div><div class="line">                        || (dx &lt; <span class="number">0</span> &amp;&amp; mAdapter != <span class="keyword">null</span> &amp;&amp; scrollX &gt;= (mAdapter</div><div class="line">                        .getCount() - <span class="number">1</span>) * getWidth() - <span class="number">1</span>);</div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.v(TAG, <span class="string">"Moved x to "</span> + x + <span class="string">","</span> + y + <span class="string">" diff="</span> + xDiff + <span class="string">","</span></div><div class="line">                            + yDiff);</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (canScroll(<span class="keyword">this</span>, <span class="keyword">false</span>, (<span class="keyword">int</span>) dx, (<span class="keyword">int</span>) x, (<span class="keyword">int</span>) y)) &#123;</div><div class="line">                    <span class="comment">// Nested view has scrollable area under this point. Let it be</span></div><div class="line">                    <span class="comment">// handled there.</span></div><div class="line">                    mInitialMotionX = mLastMotionX = x;</div><div class="line">                    mLastMotionY = y;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (xDiff &gt; mTouchSlop &amp;&amp; xDiff &gt; yDiff) &#123;</div><div class="line">                    <span class="keyword">if</span> (DEBUG)</div><div class="line">                        Log.v(TAG, <span class="string">"Starting drag!"</span>);</div><div class="line">                    mIsBeingDragged = <span class="keyword">true</span>;</div><div class="line">                    setScrollState(SCROLL_STATE_DRAGGING);</div><div class="line">                    mLastMotionX = x;</div><div class="line">                    setScrollingCacheEnabled(<span class="keyword">true</span>);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    <span class="keyword">if</span> (yDiff &gt; mTouchSlop) &#123;</div><div class="line">                        <span class="comment">// The finger has moved enough in the vertical</span></div><div class="line">                        <span class="comment">// direction to be counted as a drag... abort</span></div><div class="line">                        <span class="comment">// any attempt to drag horizontally, to work correctly</span></div><div class="line">                        <span class="comment">// with children that have scrolling containers.</span></div><div class="line">                        <span class="keyword">if</span> (DEBUG)</div><div class="line">                            Log.v(TAG, <span class="string">"Starting unable to drag!"</span>);</div><div class="line">                        mIsUnableToDrag = <span class="keyword">true</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN: &#123;</div><div class="line">			<span class="comment">/*</span></div><div class="line">			 * Remember location of down touch. ACTION_DOWN always refers to</div><div class="line">			 * pointer index 0.</div><div class="line">			 */</div><div class="line">                mLastMotionX = mInitialMotionX = ev.getX();</div><div class="line">                mLastMotionY = ev.getY();</div><div class="line">                mActivePointerId = MotionEventCompat.getPointerId(ev, <span class="number">0</span>);</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (mScrollState == SCROLL_STATE_SETTLING) &#123;</div><div class="line">                    <span class="comment">// Let the user 'catch' the pager as it animates.</span></div><div class="line">                    mIsBeingDragged = <span class="keyword">true</span>;</div><div class="line">                    mIsUnableToDrag = <span class="keyword">false</span>;</div><div class="line">                    setScrollState(SCROLL_STATE_DRAGGING);</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    completeScroll();</div><div class="line">                    mIsBeingDragged = <span class="keyword">false</span>;</div><div class="line">                    mIsUnableToDrag = <span class="keyword">false</span>;</div><div class="line">                &#125;</div><div class="line"></div><div class="line">                <span class="keyword">if</span> (DEBUG)</div><div class="line">                    Log.v(TAG, <span class="string">"Down at "</span> + mLastMotionX + <span class="string">","</span> + mLastMotionY</div><div class="line">                            + <span class="string">" mIsBeingDragged="</span> + mIsBeingDragged</div><div class="line">                            + <span class="string">"mIsUnableToDrag="</span> + mIsUnableToDrag);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line"></div><div class="line">            <span class="keyword">case</span> MotionEventCompat.ACTION_POINTER_UP:</div><div class="line">                onSecondaryPointerUp(ev);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">		<span class="comment">/*</span></div><div class="line">		 * The only time we want to intercept motion events is if we are in the</div><div class="line">		 * drag mode.</div><div class="line">		 */</div><div class="line">        <span class="keyword">return</span> mIsBeingDragged;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onTouchEvent</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mFakeDragging) &#123;</div><div class="line">            <span class="comment">// A fake drag is in progress already, ignore this real one</span></div><div class="line">            <span class="comment">// but still eat the touch events.</span></div><div class="line">            <span class="comment">// (It is likely that the user is multi-touching the screen.)</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (ev.getAction() == MotionEvent.ACTION_DOWN &amp;&amp; ev.getEdgeFlags() != <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// Don't handle edge touches immediately -- they may actually belong</span></div><div class="line">            <span class="comment">// to one of our</span></div><div class="line">            <span class="comment">// descendants.</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mAdapter == <span class="keyword">null</span> || mAdapter.getCount() == <span class="number">0</span>) &#123;</div><div class="line">            <span class="comment">// Nothing to present or scroll; nothing to touch.</span></div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mVelocityTracker == <span class="keyword">null</span>) &#123;</div><div class="line">            mVelocityTracker = VelocityTracker.obtain();</div><div class="line">        &#125;</div><div class="line">        mVelocityTracker.addMovement(ev);</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> action = ev.getAction();</div><div class="line">        <span class="keyword">boolean</span> needsInvalidate = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">switch</span> (action &amp; MotionEventCompat.ACTION_MASK) &#123;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_DOWN: &#123;</div><div class="line">			<span class="comment">/*</span></div><div class="line">			 * If being flinged and user touches, stop the fling. isFinished</div><div class="line">			 * will be false if being flinged.</div><div class="line">			 */</div><div class="line">                completeScroll();</div><div class="line"></div><div class="line">                <span class="comment">// Remember where the motion event started</span></div><div class="line">                mLastMotionX = mInitialMotionX = ev.getX();</div><div class="line">                mActivePointerId = MotionEventCompat.getPointerId(ev, <span class="number">0</span>);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_MOVE:</div><div class="line">                <span class="keyword">if</span> (!mIsBeingDragged) &#123;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> pointerIndex = MotionEventCompat.findPointerIndex(ev,</div><div class="line">                            mActivePointerId);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> x = MotionEventCompat.getX(ev, pointerIndex);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> xDiff = Math.abs(x - mLastMotionX);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> y = MotionEventCompat.getY(ev, pointerIndex);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> yDiff = Math.abs(y - mLastMotionY);</div><div class="line">                    <span class="keyword">if</span> (DEBUG)</div><div class="line">                        Log.v(TAG, <span class="string">"Moved x to "</span> + x + <span class="string">","</span> + y + <span class="string">" diff="</span> + xDiff</div><div class="line">                                + <span class="string">","</span> + yDiff);</div><div class="line">                    <span class="keyword">if</span> (xDiff &gt; mTouchSlop &amp;&amp; xDiff &gt; yDiff) &#123;</div><div class="line">                        <span class="keyword">if</span> (DEBUG)</div><div class="line">                            Log.v(TAG, <span class="string">"Starting drag!"</span>);</div><div class="line">                        mIsBeingDragged = <span class="keyword">true</span>;</div><div class="line">                        mLastMotionX = x;</div><div class="line">                        setScrollState(SCROLL_STATE_DRAGGING);</div><div class="line">                        setScrollingCacheEnabled(<span class="keyword">true</span>);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">if</span> (mIsBeingDragged) &#123;</div><div class="line">                    <span class="comment">// Scroll to follow the motion event</span></div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> activePointerIndex = MotionEventCompat</div><div class="line">                            .findPointerIndex(ev, mActivePointerId);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> x = MotionEventCompat.getX(ev, activePointerIndex);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> deltaX = mLastMotionX - x;</div><div class="line">                    mLastMotionX = x;</div><div class="line">                    <span class="keyword">float</span> oldScrollX = getScrollX();</div><div class="line">                    <span class="keyword">float</span> scrollX = oldScrollX + deltaX;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> width = getWidth();</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> widthWithMargin = width + mPageMargin;</div><div class="line"></div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> lastItemIndex = mAdapter.getCount() - <span class="number">1</span>;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> leftBound = Math.max(<span class="number">0</span>, (mCurItem - <span class="number">1</span>)</div><div class="line">                            * widthWithMargin);</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">float</span> rightBound = Math.min(mCurItem + <span class="number">1</span>, lastItemIndex)</div><div class="line">                            * widthWithMargin;</div><div class="line">                    <span class="keyword">if</span> (scrollX &lt; leftBound) &#123;</div><div class="line">                        <span class="keyword">if</span> (leftBound == <span class="number">0</span>) &#123;</div><div class="line">                            <span class="keyword">float</span> over = -scrollX;</div><div class="line">                            needsInvalidate = mLeftEdge.onPull(over / width);</div><div class="line">                        &#125;</div><div class="line">                        scrollX = leftBound;</div><div class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (scrollX &gt; rightBound) &#123;</div><div class="line">                        <span class="keyword">if</span> (rightBound == lastItemIndex * widthWithMargin) &#123;</div><div class="line">                            <span class="keyword">float</span> over = scrollX - rightBound;</div><div class="line">                            needsInvalidate = mRightEdge.onPull(over / width);</div><div class="line">                        &#125;</div><div class="line">                        scrollX = rightBound;</div><div class="line">                    &#125;</div><div class="line">                    <span class="comment">// Don't lose the rounded component</span></div><div class="line">                    mLastMotionX += scrollX - (<span class="keyword">int</span>) scrollX;</div><div class="line">                    scrollTo((<span class="keyword">int</span>) scrollX, getScrollY());</div><div class="line">                    <span class="keyword">if</span> (mOnPageChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">                        <span class="keyword">final</span> <span class="keyword">int</span> position = (<span class="keyword">int</span>) scrollX / widthWithMargin;</div><div class="line">                        <span class="keyword">final</span> <span class="keyword">int</span> positionOffsetPixels = (<span class="keyword">int</span>) scrollX</div><div class="line">                                % widthWithMargin;</div><div class="line">                        <span class="keyword">final</span> <span class="keyword">float</span> positionOffset = (<span class="keyword">float</span>) positionOffsetPixels</div><div class="line">                                / widthWithMargin;</div><div class="line">                        mOnPageChangeListener.onPageScrolled(position,</div><div class="line">                                positionOffset, positionOffsetPixels);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_UP:</div><div class="line">                <span class="keyword">if</span> (mIsBeingDragged) &#123;</div><div class="line">                    <span class="keyword">final</span> VelocityTracker velocityTracker = mVelocityTracker;</div><div class="line">                    velocityTracker.computeCurrentVelocity(<span class="number">1000</span>, mMaximumVelocity);</div><div class="line">                    <span class="keyword">int</span> initialVelocity = (<span class="keyword">int</span>) VelocityTrackerCompat.getXVelocity(</div><div class="line">                            velocityTracker, mActivePointerId);</div><div class="line">                    mPopulatePending = <span class="keyword">true</span>;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> widthWithMargin = getWidth() + mPageMargin;</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> scrollX = getScrollX();</div><div class="line">                    <span class="keyword">final</span> <span class="keyword">int</span> currentPage = scrollX / widthWithMargin;</div><div class="line">                    <span class="keyword">int</span> nextPage = initialVelocity &gt; <span class="number">0</span> ? currentPage</div><div class="line">                            : currentPage + <span class="number">1</span>;</div><div class="line">                    setCurrentItemInternal(nextPage, <span class="keyword">true</span>, <span class="keyword">true</span>, initialVelocity);</div><div class="line"></div><div class="line">                    mActivePointerId = INVALID_POINTER;</div><div class="line">                    endDrag();</div><div class="line">                    needsInvalidate = mLeftEdge.onRelease()</div><div class="line">                            | mRightEdge.onRelease();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEvent.ACTION_CANCEL:</div><div class="line">                <span class="keyword">if</span> (mIsBeingDragged) &#123;</div><div class="line">                    setCurrentItemInternal(mCurItem, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line">                    mActivePointerId = INVALID_POINTER;</div><div class="line">                    endDrag();</div><div class="line">                    needsInvalidate = mLeftEdge.onRelease()</div><div class="line">                            | mRightEdge.onRelease();</div><div class="line">                &#125;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            <span class="keyword">case</span> MotionEventCompat.ACTION_POINTER_DOWN: &#123;</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> index = MotionEventCompat.getActionIndex(ev);</div><div class="line">                <span class="keyword">final</span> <span class="keyword">float</span> x = MotionEventCompat.getX(ev, index);</div><div class="line">                mLastMotionX = x;</div><div class="line">                mActivePointerId = MotionEventCompat.getPointerId(ev, index);</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">case</span> MotionEventCompat.ACTION_POINTER_UP:</div><div class="line">                onSecondaryPointerUp(ev);</div><div class="line">                mLastMotionX = MotionEventCompat.getX(ev,</div><div class="line">                        MotionEventCompat.findPointerIndex(ev, mActivePointerId));</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (needsInvalidate) &#123;</div><div class="line">            invalidate();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.draw(canvas);</div><div class="line">        <span class="keyword">boolean</span> needsInvalidate = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> overScrollMode = ViewCompat.getOverScrollMode(<span class="keyword">this</span>);</div><div class="line">        <span class="keyword">if</span> (overScrollMode == ViewCompat.OVER_SCROLL_ALWAYS</div><div class="line">                || (overScrollMode == ViewCompat.OVER_SCROLL_IF_CONTENT_SCROLLS</div><div class="line">                &amp;&amp; mAdapter != <span class="keyword">null</span> &amp;&amp; mAdapter.getCount() &gt; <span class="number">1</span>)) &#123;</div><div class="line">            <span class="keyword">if</span> (!mLeftEdge.isFinished()) &#123;</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> restoreCount = canvas.save();</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> height = getHeight() - getPaddingTop()</div><div class="line">                        - getPaddingBottom();</div><div class="line"></div><div class="line">                canvas.rotate(<span class="number">270</span>);</div><div class="line">                canvas.translate(-height + getPaddingTop(), <span class="number">0</span>);</div><div class="line">                mLeftEdge.setSize(height, getWidth());</div><div class="line">                needsInvalidate |= mLeftEdge.draw(canvas);</div><div class="line">                canvas.restoreToCount(restoreCount);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (!mRightEdge.isFinished()) &#123;</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> restoreCount = canvas.save();</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> width = getWidth();</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> height = getHeight() - getPaddingTop()</div><div class="line">                        - getPaddingBottom();</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> itemCount = mAdapter != <span class="keyword">null</span> ? mAdapter.getCount()</div><div class="line">                        : <span class="number">1</span>;</div><div class="line"></div><div class="line">                canvas.rotate(<span class="number">90</span>);</div><div class="line">                canvas.translate(-getPaddingTop(), -itemCount</div><div class="line">                        * (width + mPageMargin) + mPageMargin);</div><div class="line">                mRightEdge.setSize(height, width);</div><div class="line">                needsInvalidate |= mRightEdge.draw(canvas);</div><div class="line">                canvas.restoreToCount(restoreCount);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mLeftEdge.finish();</div><div class="line">            mRightEdge.finish();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (needsInvalidate) &#123;</div><div class="line">            <span class="comment">// Keep animating</span></div><div class="line">            invalidate();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDraw</span><span class="params">(Canvas canvas)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>.onDraw(canvas);</div><div class="line"></div><div class="line">        <span class="comment">// Draw the margin drawable if needed.</span></div><div class="line">        <span class="keyword">if</span> (mPageMargin &gt; <span class="number">0</span> &amp;&amp; mMarginDrawable != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> scrollX = getScrollX();</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> width = getWidth();</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> offset = scrollX % (width + mPageMargin);</div><div class="line">            <span class="keyword">if</span> (offset != <span class="number">0</span>) &#123;</div><div class="line">                <span class="comment">// Pages fit completely when settled; we only need to draw when</span></div><div class="line">                <span class="comment">// in between</span></div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> left = scrollX - offset + width;</div><div class="line">                mMarginDrawable.setBounds(left, <span class="number">0</span>, left + mPageMargin,</div><div class="line">                        getHeight());</div><div class="line">                mMarginDrawable.draw(canvas);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Start a fake drag of the pager.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;</div><div class="line">     * A fake drag can be useful if you want to synchronize the motion of the</div><div class="line">     * ViewPager with the touch scrolling of another view, while still letting</div><div class="line">     * the ViewPager control the snapping motion and fling behavior. (e.g.</div><div class="line">     * parallax-scrolling tabs.) Call &#123;<span class="doctag">@link</span> #fakeDragBy(float)&#125; to simulate the</div><div class="line">     * actual drag motion. Call &#123;<span class="doctag">@link</span> #endFakeDrag()&#125; to complete the fake drag</div><div class="line">     * and fling as necessary.</div><div class="line">     *</div><div class="line">     * &lt;p&gt;</div><div class="line">     * During a fake drag the ViewPager will ignore all touch events. If a real</div><div class="line">     * drag is already in progress, this method will return false.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> true if the fake drag began successfully, false if it could not</div><div class="line">     *         be started.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> #fakeDragBy(float)</div><div class="line">     * <span class="doctag">@see</span> #endFakeDrag()</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">beginFakeDrag</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mIsBeingDragged) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">        &#125;</div><div class="line">        mFakeDragging = <span class="keyword">true</span>;</div><div class="line">        setScrollState(SCROLL_STATE_DRAGGING);</div><div class="line">        mInitialMotionX = mLastMotionX = <span class="number">0</span>;</div><div class="line">        <span class="keyword">if</span> (mVelocityTracker == <span class="keyword">null</span>) &#123;</div><div class="line">            mVelocityTracker = VelocityTracker.obtain();</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            mVelocityTracker.clear();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">long</span> time = SystemClock.uptimeMillis();</div><div class="line">        <span class="keyword">final</span> MotionEvent ev = MotionEvent.obtain(time, time,</div><div class="line">                MotionEvent.ACTION_DOWN, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        mVelocityTracker.addMovement(ev);</div><div class="line">        ev.recycle();</div><div class="line">        mFakeDragBeginTime = time;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * End a fake drag of the pager.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> #beginFakeDrag()</div><div class="line">     * <span class="doctag">@see</span> #fakeDragBy(float)</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">endFakeDrag</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!mFakeDragging) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</div><div class="line">                    <span class="string">"No fake drag in progress. Call beginFakeDrag first."</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> VelocityTracker velocityTracker = mVelocityTracker;</div><div class="line">        velocityTracker.computeCurrentVelocity(<span class="number">1000</span>, mMaximumVelocity);</div><div class="line">        <span class="keyword">int</span> initialVelocity = (<span class="keyword">int</span>) VelocityTrackerCompat.getYVelocity(</div><div class="line">                velocityTracker, mActivePointerId);</div><div class="line">        mPopulatePending = <span class="keyword">true</span>;</div><div class="line">        <span class="keyword">if</span> ((Math.abs(initialVelocity) &gt; mMinimumVelocity)</div><div class="line">                || Math.abs(mInitialMotionX - mLastMotionX) &gt;= (getWidth() / <span class="number">3</span>)) &#123;</div><div class="line">            <span class="keyword">if</span> (mLastMotionX &gt; mInitialMotionX) &#123;</div><div class="line">                setCurrentItemInternal(mCurItem - <span class="number">1</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line">            &#125; <span class="keyword">else</span> &#123;</div><div class="line">                setCurrentItemInternal(mCurItem + <span class="number">1</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            setCurrentItemInternal(mCurItem, <span class="keyword">true</span>, <span class="keyword">true</span>);</div><div class="line">        &#125;</div><div class="line">        endDrag();</div><div class="line"></div><div class="line">        mFakeDragging = <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Fake drag by an offset in pixels. You must have called</div><div class="line">     * &#123;<span class="doctag">@link</span> #beginFakeDrag()&#125; first.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> xOffset</div><div class="line">     *            Offset in pixels to drag by.</div><div class="line">     * <span class="doctag">@see</span> #beginFakeDrag()</div><div class="line">     * <span class="doctag">@see</span> #endFakeDrag()</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fakeDragBy</span><span class="params">(<span class="keyword">float</span> xOffset)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (!mFakeDragging) &#123;</div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(</div><div class="line">                    <span class="string">"No fake drag in progress. Call beginFakeDrag first."</span>);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        mLastMotionX += xOffset;</div><div class="line">        <span class="keyword">float</span> scrollX = getScrollX() - xOffset;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> width = getWidth();</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> widthWithMargin = width + mPageMargin;</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">float</span> leftBound = Math.max(<span class="number">0</span>, (mCurItem - <span class="number">1</span>) * widthWithMargin);</div><div class="line">        <span class="keyword">final</span> <span class="keyword">float</span> rightBound = Math</div><div class="line">                .min(mCurItem + <span class="number">1</span>, mAdapter.getCount() - <span class="number">1</span>) * widthWithMargin;</div><div class="line">        <span class="keyword">if</span> (scrollX &lt; leftBound) &#123;</div><div class="line">            scrollX = leftBound;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (scrollX &gt; rightBound) &#123;</div><div class="line">            scrollX = rightBound;</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// Don't lose the rounded component</span></div><div class="line">        mLastMotionX += scrollX - (<span class="keyword">int</span>) scrollX;</div><div class="line">        scrollTo((<span class="keyword">int</span>) scrollX, getScrollY());</div><div class="line">        <span class="keyword">if</span> (mOnPageChangeListener != <span class="keyword">null</span>) &#123;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> position = (<span class="keyword">int</span>) scrollX / widthWithMargin;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> positionOffsetPixels = (<span class="keyword">int</span>) scrollX % widthWithMargin;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">float</span> positionOffset = (<span class="keyword">float</span>) positionOffsetPixels</div><div class="line">                    / widthWithMargin;</div><div class="line">            mOnPageChangeListener.onPageScrolled(position, positionOffset,</div><div class="line">                    positionOffsetPixels);</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Synthesize an event for the VelocityTracker.</span></div><div class="line">        <span class="keyword">final</span> <span class="keyword">long</span> time = SystemClock.uptimeMillis();</div><div class="line">        <span class="keyword">final</span> MotionEvent ev = MotionEvent.obtain(mFakeDragBeginTime, time,</div><div class="line">                MotionEvent.ACTION_MOVE, mLastMotionX, <span class="number">0</span>, <span class="number">0</span>);</div><div class="line">        mVelocityTracker.addMovement(ev);</div><div class="line">        ev.recycle();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Returns true if a fake drag is in progress.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@return</span> true if currently in a fake drag, false otherwise.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> #beginFakeDrag()</div><div class="line">     * <span class="doctag">@see</span> #fakeDragBy(float)</div><div class="line">     * <span class="doctag">@see</span> #endFakeDrag()</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFakeDragging</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> mFakeDragging;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">onSecondaryPointerUp</span><span class="params">(MotionEvent ev)</span> </span>&#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> pointerIndex = MotionEventCompat.getActionIndex(ev);</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> pointerId = MotionEventCompat.getPointerId(ev, pointerIndex);</div><div class="line">        <span class="keyword">if</span> (pointerId == mActivePointerId) &#123;</div><div class="line">            <span class="comment">// This was our active pointer going up. Choose a new</span></div><div class="line">            <span class="comment">// active pointer and adjust accordingly.</span></div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> newPointerIndex = pointerIndex == <span class="number">0</span> ? <span class="number">1</span> : <span class="number">0</span>;</div><div class="line">            mLastMotionX = MotionEventCompat.getX(ev, newPointerIndex);</div><div class="line">            mActivePointerId = MotionEventCompat.getPointerId(ev,</div><div class="line">                    newPointerIndex);</div><div class="line">            <span class="keyword">if</span> (mVelocityTracker != <span class="keyword">null</span>) &#123;</div><div class="line">                mVelocityTracker.clear();</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">endDrag</span><span class="params">()</span> </span>&#123;</div><div class="line">        mIsBeingDragged = <span class="keyword">false</span>;</div><div class="line">        mIsUnableToDrag = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (mVelocityTracker != <span class="keyword">null</span>) &#123;</div><div class="line">            mVelocityTracker.recycle();</div><div class="line">            mVelocityTracker = <span class="keyword">null</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setScrollingCacheEnabled</span><span class="params">(<span class="keyword">boolean</span> enabled)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mScrollingCacheEnabled != enabled) &#123;</div><div class="line">            mScrollingCacheEnabled = enabled;</div><div class="line">            <span class="keyword">if</span> (USE_CACHE) &#123;</div><div class="line">                <span class="keyword">final</span> <span class="keyword">int</span> size = getChildCount();</div><div class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; size; ++i) &#123;</div><div class="line">                    <span class="keyword">final</span> View child = getChildAt(i);</div><div class="line">                    <span class="keyword">if</span> (child.getVisibility() != GONE) &#123;</div><div class="line">                        child.setDrawingCacheEnabled(enabled);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Tests scrollability within child views of v given a delta of dx.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> v</div><div class="line">     *            View to test for horizontal scrollability</div><div class="line">     * <span class="doctag">@param</span> checkV</div><div class="line">     *            Whether the view v passed should itself be checked for</div><div class="line">     *            scrollability (true), or just its children (false).</div><div class="line">     * <span class="doctag">@param</span> dx</div><div class="line">     *            Delta scrolled in pixels</div><div class="line">     * <span class="doctag">@param</span> x</div><div class="line">     *            X coordinate of the active touch point</div><div class="line">     * <span class="doctag">@param</span> y</div><div class="line">     *            Y coordinate of the active touch point</div><div class="line">     * <span class="doctag">@return</span> true if child views of v can be scrolled by delta of dx.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">canScroll</span><span class="params">(View v, <span class="keyword">boolean</span> checkV, <span class="keyword">int</span> dx, <span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (v <span class="keyword">instanceof</span> ViewGroup) &#123;</div><div class="line">            <span class="keyword">final</span> ViewGroup group = (ViewGroup) v;</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> scrollX = v.getScrollX();</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> scrollY = v.getScrollY();</div><div class="line">            <span class="keyword">final</span> <span class="keyword">int</span> count = group.getChildCount();</div><div class="line">            <span class="comment">// Count backwards - let topmost views consume scroll distance</span></div><div class="line">            <span class="comment">// first.</span></div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = count - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</div><div class="line">                <span class="comment">// <span class="doctag">TODO:</span> Add versioned support here for transformed views.</span></div><div class="line">                <span class="comment">// This will not work for transformed views in Honeycomb+</span></div><div class="line">                <span class="keyword">final</span> View child = group.getChildAt(i);</div><div class="line">                <span class="keyword">if</span> (x + scrollX &gt;= child.getLeft()</div><div class="line">                        &amp;&amp; x + scrollX &lt; child.getRight()</div><div class="line">                        &amp;&amp; y + scrollY &gt;= child.getTop()</div><div class="line">                        &amp;&amp; y + scrollY &lt; child.getBottom()</div><div class="line">                        &amp;&amp; canScroll(child, <span class="keyword">true</span>, dx,</div><div class="line">                        x + scrollX - child.getLeft(), y + scrollY</div><div class="line">                                - child.getTop())) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> checkV &amp;&amp; ViewCompat.canScrollHorizontally(v, -dx);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchKeyEvent</span><span class="params">(KeyEvent event)</span> </span>&#123;</div><div class="line">        <span class="comment">// Let the focused view and/or our descendants get the key first</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.dispatchKeyEvent(event) || executeKeyEvent(event);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * You can call this function yourself to have the scroll view perform</div><div class="line">     * scrolling from a key event, just as if the event had been dispatched to</div><div class="line">     * it by the view hierarchy.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> event</div><div class="line">     *            The key event to execute.</div><div class="line">     * <span class="doctag">@return</span> Return true if the event was handled, else false.</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">executeKeyEvent</span><span class="params">(KeyEvent event)</span> </span>&#123;</div><div class="line">        <span class="keyword">boolean</span> handled = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">if</span> (event.getAction() == KeyEvent.ACTION_DOWN) &#123;</div><div class="line">            <span class="keyword">switch</span> (event.getKeyCode()) &#123;</div><div class="line">                <span class="keyword">case</span> KeyEvent.KEYCODE_DPAD_LEFT:</div><div class="line">                    handled = arrowScroll(FOCUS_LEFT);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> KeyEvent.KEYCODE_DPAD_RIGHT:</div><div class="line">                    handled = arrowScroll(FOCUS_RIGHT);</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">                <span class="keyword">case</span> KeyEvent.KEYCODE_TAB:</div><div class="line">                    <span class="keyword">if</span> (KeyEventCompat.hasNoModifiers(event)) &#123;</div><div class="line">                        handled = arrowScroll(FOCUS_FORWARD);</div><div class="line">                    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (KeyEventCompat.hasModifiers(event,</div><div class="line">                            KeyEvent.META_SHIFT_ON)) &#123;</div><div class="line">                        handled = arrowScroll(FOCUS_BACKWARD);</div><div class="line">                    &#125;</div><div class="line">                    <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> handled;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">arrowScroll</span><span class="params">(<span class="keyword">int</span> direction)</span> </span>&#123;</div><div class="line">        View currentFocused = findFocus();</div><div class="line">        <span class="keyword">if</span> (currentFocused == <span class="keyword">this</span>)</div><div class="line">            currentFocused = <span class="keyword">null</span>;</div><div class="line"></div><div class="line">        <span class="keyword">boolean</span> handled = <span class="keyword">false</span>;</div><div class="line"></div><div class="line">        View nextFocused = FocusFinder.getInstance().findNextFocus(<span class="keyword">this</span>,</div><div class="line">                currentFocused, direction);</div><div class="line">        <span class="keyword">if</span> (nextFocused != <span class="keyword">null</span> &amp;&amp; nextFocused != currentFocused) &#123;</div><div class="line">            <span class="keyword">if</span> (direction == View.FOCUS_LEFT) &#123;</div><div class="line">                <span class="comment">// If there is nothing to the left, or this is causing us to</span></div><div class="line">                <span class="comment">// jump to the right, then what we really want to do is page</span></div><div class="line">                <span class="comment">// left.</span></div><div class="line">                <span class="keyword">if</span> (currentFocused != <span class="keyword">null</span></div><div class="line">                        &amp;&amp; nextFocused.getLeft() &gt;= currentFocused.getLeft()) &#123;</div><div class="line">                    handled = pageLeft();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    handled = nextFocused.requestFocus();</div><div class="line">                &#125;</div><div class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (direction == View.FOCUS_RIGHT) &#123;</div><div class="line">                <span class="comment">// If there is nothing to the right, or this is causing us to</span></div><div class="line">                <span class="comment">// jump to the left, then what we really want to do is page</span></div><div class="line">                <span class="comment">// right.</span></div><div class="line">                <span class="keyword">if</span> (currentFocused != <span class="keyword">null</span></div><div class="line">                        &amp;&amp; nextFocused.getLeft() &lt;= currentFocused.getLeft()) &#123;</div><div class="line">                    handled = pageRight();</div><div class="line">                &#125; <span class="keyword">else</span> &#123;</div><div class="line">                    handled = nextFocused.requestFocus();</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (direction == FOCUS_LEFT || direction == FOCUS_BACKWARD) &#123;</div><div class="line">            <span class="comment">// Trying to move left and nothing there; try to page.</span></div><div class="line">            handled = pageLeft();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (direction == FOCUS_RIGHT || direction == FOCUS_FORWARD) &#123;</div><div class="line">            <span class="comment">// Trying to move right and nothing there; try to page.</span></div><div class="line">            handled = pageRight();</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (handled) &#123;</div><div class="line">            playSoundEffect(SoundEffectConstants</div><div class="line">                    .getContantForFocusDirection(direction));</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> handled;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">pageLeft</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mCurItem &gt; <span class="number">0</span>) &#123;</div><div class="line">            setCurrentItem(mCurItem - <span class="number">1</span>, <span class="keyword">true</span>);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">pageRight</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">if</span> (mAdapter != <span class="keyword">null</span> &amp;&amp; mCurItem &lt; (mAdapter.getCount() - <span class="number">1</span>)) &#123;</div><div class="line">            setCurrentItem(mCurItem + <span class="number">1</span>, <span class="keyword">true</span>);</div><div class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * We only want the current page that is being shown to be focusable.</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFocusables</span><span class="params">(ArrayList&lt;View&gt; views, <span class="keyword">int</span> direction,</span></span></div><div class="line">                              <span class="keyword">int</span> focusableMode) &#123;</div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> focusableCount = views.size();</div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> descendantFocusability = getDescendantFocusability();</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (descendantFocusability != FOCUS_BLOCK_DESCENDANTS) &#123;</div><div class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; getChildCount(); i++) &#123;</div><div class="line">                <span class="keyword">final</span> View child = getChildAt(i);</div><div class="line">                <span class="keyword">if</span> (child.getVisibility() == VISIBLE) &#123;</div><div class="line">                    ItemInfo ii = infoForChild(child);</div><div class="line">                    <span class="keyword">if</span> (ii != <span class="keyword">null</span> &amp;&amp; ii.position == mCurItem) &#123;</div><div class="line">                        child.addFocusables(views, direction, focusableMode);</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// we add ourselves (if focusable) in all cases except for when we are</span></div><div class="line">        <span class="comment">// FOCUS_AFTER_DESCENDANTS and there are some descendants focusable.</span></div><div class="line">        <span class="comment">// this is</span></div><div class="line">        <span class="comment">// to avoid the focus search finding layouts when a more precise search</span></div><div class="line">        <span class="comment">// among the focusable children would be more interesting.</span></div><div class="line">        <span class="keyword">if</span> (descendantFocusability != FOCUS_AFTER_DESCENDANTS ||</div><div class="line">                <span class="comment">// No focusable descendants</span></div><div class="line">                (focusableCount == views.size())) &#123;</div><div class="line">            <span class="comment">// Note that we can't call the superclass here, because it will</span></div><div class="line">            <span class="comment">// add all views in. So we need to do the same thing View does.</span></div><div class="line">            <span class="keyword">if</span> (!isFocusable()) &#123;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> ((focusableMode &amp; FOCUSABLES_TOUCH_MODE) == FOCUSABLES_TOUCH_MODE</div><div class="line">                    &amp;&amp; isInTouchMode() &amp;&amp; !isFocusableInTouchMode()) &#123;</div><div class="line">                <span class="keyword">return</span>;</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">if</span> (views != <span class="keyword">null</span>) &#123;</div><div class="line">                views.add(<span class="keyword">this</span>);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * We only want the current page that is being shown to be touchable.</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addTouchables</span><span class="params">(ArrayList&lt;View&gt; views)</span> </span>&#123;</div><div class="line">        <span class="comment">// Note that we don't call super.addTouchables(), which means that</span></div><div class="line">        <span class="comment">// we don't call View.addTouchables(). This is okay because a ViewPager</span></div><div class="line">        <span class="comment">// is itself not touchable.</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; getChildCount(); i++) &#123;</div><div class="line">            <span class="keyword">final</span> View child = getChildAt(i);</div><div class="line">            <span class="keyword">if</span> (child.getVisibility() == VISIBLE) &#123;</div><div class="line">                ItemInfo ii = infoForChild(child);</div><div class="line">                <span class="keyword">if</span> (ii != <span class="keyword">null</span> &amp;&amp; ii.position == mCurItem) &#123;</div><div class="line">                    child.addTouchables(views);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * We only want the current page that is being shown to be focusable.</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">onRequestFocusInDescendants</span><span class="params">(<span class="keyword">int</span> direction,</span></span></div><div class="line">                                                  Rect previouslyFocusedRect) &#123;</div><div class="line">        <span class="keyword">int</span> index;</div><div class="line">        <span class="keyword">int</span> increment;</div><div class="line">        <span class="keyword">int</span> end;</div><div class="line">        <span class="keyword">int</span> count = getChildCount();</div><div class="line">        <span class="keyword">if</span> ((direction &amp; FOCUS_FORWARD) != <span class="number">0</span>) &#123;</div><div class="line">            index = <span class="number">0</span>;</div><div class="line">            increment = <span class="number">1</span>;</div><div class="line">            end = count;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            index = count - <span class="number">1</span>;</div><div class="line">            increment = -<span class="number">1</span>;</div><div class="line">            end = -<span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = index; i != end; i += increment) &#123;</div><div class="line">            View child = getChildAt(i);</div><div class="line">            <span class="keyword">if</span> (child.getVisibility() == VISIBLE) &#123;</div><div class="line">                ItemInfo ii = infoForChild(child);</div><div class="line">                <span class="keyword">if</span> (ii != <span class="keyword">null</span> &amp;&amp; ii.position == mCurItem) &#123;</div><div class="line">                    <span class="keyword">if</span> (child.requestFocus(direction, previouslyFocusedRect)) &#123;</div><div class="line">                        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                    &#125;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">dispatchPopulateAccessibilityEvent</span><span class="params">(AccessibilityEvent event)</span> </span>&#123;</div><div class="line">        <span class="comment">// ViewPagers should only report accessibility info for the current</span></div><div class="line">        <span class="comment">// page,</span></div><div class="line">        <span class="comment">// otherwise things get very confusing.</span></div><div class="line"></div><div class="line">        <span class="comment">// <span class="doctag">TODO:</span> Should this note something about the paging container?</span></div><div class="line"></div><div class="line">        <span class="keyword">final</span> <span class="keyword">int</span> childCount = getChildCount();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; childCount; i++) &#123;</div><div class="line">            <span class="keyword">final</span> View child = getChildAt(i);</div><div class="line">            <span class="keyword">if</span> (child.getVisibility() == VISIBLE) &#123;</div><div class="line">                <span class="keyword">final</span> ItemInfo ii = infoForChild(child);</div><div class="line">                <span class="keyword">if</span> (ii != <span class="keyword">null</span> &amp;&amp; ii.position == mCurItem</div><div class="line">                        &amp;&amp; child.dispatchPopulateAccessibilityEvent(event)) &#123;</div><div class="line">                    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">PagerObserver</span> <span class="keyword">extends</span> <span class="title">DataSetObserver</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onChanged</span><span class="params">()</span> </span>&#123;</div><div class="line">            dataSetChanged();</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="meta">@Override</span></div><div class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onInvalidated</span><span class="params">()</span> </span>&#123;</div><div class="line">            dataSetChanged();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>设置setOffscreenPageLimit(0),ViewPager就不会缓存了，PS:无法和ToolBar一起使用,</p>
<h4 id="第二种方式"><a href="#第二种方式" class="headerlink" title="第二种方式"></a>第二种方式</h4><p>使用Fragment的setUserVisibleHint方法（相当于Activity中的onResume方法）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HomeFragment</span> <span class="keyword">extends</span> <span class="title">Fragment</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="keyword">private</span> View contentView;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">    * 是否创建</div><div class="line">    */</div><div class="line">   <span class="keyword">protected</span> <span class="keyword">boolean</span> isCreate = <span class="keyword">false</span>; </div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> View <span class="title">onCreateView</span><span class="params">(LayoutInflater inflater, ViewGroup container,</span></span></div><div class="line">                            Bundle savedInstanceState) &#123;</div><div class="line">       contentView = inflater.inflate(R.layout.fragment_home, container, <span class="keyword">false</span>);</div><div class="line">       <span class="keyword">return</span> contentView;</div><div class="line">   &#125;</div><div class="line"></div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">   	isCreate=<span class="keyword">true</span>;</div><div class="line">&#125;</div><div class="line">   <span class="meta">@Override</span></div><div class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUserVisibleHint</span><span class="params">(<span class="keyword">boolean</span> isVisibleToUser)</span> </span>&#123;</div><div class="line">       <span class="keyword">super</span>.setUserVisibleHint(isVisibleToUser);</div><div class="line">       <span class="keyword">if</span> (isVisibleToUser &amp;&amp; isCreate) &#123;</div><div class="line">           <span class="comment">//相当于Fragment的onResume</span></div><div class="line">           <span class="comment">//在这里处理加载数据等操作</span></div><div class="line">       &#125; <span class="keyword">else</span> &#123;</div><div class="line">           <span class="comment">//相当于Fragment的onPause</span></div><div class="line">       &#125;</div><div class="line">   &#125;</div></pre></td></tr></table></figure>
<p>####其它<br>如果不希望切换ViewPager的时候每次都重新创建Fragment的话，也很简单只需要将适配器的两个方法注释掉就好：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">	<span class="meta">@Override</span></div><div class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(ViewGroup container, <span class="keyword">int</span> position, Object object)</span> </span>&#123;</div><div class="line">             <span class="comment">//super.destroyItem(container, position, object);</span></div><div class="line">         &#125;</div><div class="line"></div><div class="line">         <span class="meta">@Override</span></div><div class="line">         <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroyItem</span><span class="params">(View container, <span class="keyword">int</span> position, Object object)</span> </span>&#123;</div><div class="line">             <span class="comment">//super.destroyItem(container, position, object);</span></div><div class="line">           </div><div class="line">         &#125;</div><div class="line"><span class="comment">//不让他们调用父类方法就不会销毁Fagment了</span></div></pre></td></tr></table></figure>
<p>#####最后<br>附上自己git</p>
<p><a href="https://github.com/aohanyao/NoCacheViewPager" target="_blank" rel="external">https://github.com/aohanyao/NoCacheViewPager</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/08/Android初级进阶之自定义时钟-一/" itemprop="url">
                  Android初级进阶之自定义时钟(一)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-08T16:22:13+08:00" content="2016-08-08">
              2016-08-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Android初级进阶/" itemprop="url" rel="index">
                    <span itemprop="name">Android初级进阶</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>一直以为仪表盘，时钟之类的非常的难，不敢去触摸这个领域。真正接触了才发现不过如此。</p>
<h4 id="技术要点"><a href="#技术要点" class="headerlink" title="技术要点"></a>技术要点</h4><pre><code>1. cancvas
        1. Cancvas.save()        保存画布
        2. Cancvas.restore()    合并画布
        3. Cancvas.translate()    切换x,y坐标点
        4. Cancvas.rotate()        旋转画布
2. 自定义View相关的知识
    1. Measure
</code></pre><h4 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h4><pre><code>实现静态的时钟UI
</code></pre><h4 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h4><p><img src="http://obh9jd33g.bkt.clouddn.com/colick_img.png" alt=""></p>
<h5 id="1-测量"><a href="#1-测量" class="headerlink" title="1.测量"></a>1.测量</h5><p>测量View的宽度与高度，因为是画一个圆形的时钟，所以View取得是高度与宽度的最小值，一下是测量方法</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">    private int measureSize(int spec) &#123;</div><div class="line">        int result;</div><div class="line">        int size = MeasureSpec.getSize(spec);//获取大小</div><div class="line">        int mode = MeasureSpec.getMode(spec);//获取模式</div><div class="line">        if (mode == MeasureSpec.EXACTLY) &#123;</div><div class="line">            result = size;</div><div class="line">        &#125; else &#123;</div><div class="line">            result = 100;</div><div class="line">            if (mode == MeasureSpec.AT_MOST) &#123;</div><div class="line">                result = Math.min(result, size);</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        return result;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">	@Override</div><div class="line">    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123;</div><div class="line">        mCircleWidth = Math.min(measureSize(heightMeasureSpec), measureSize(widthMeasureSpec));</div><div class="line">        super.onMeasure(widthMeasureSpec, heightMeasureSpec);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">``` </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">##### 2.绘制最外层的圆</div><div class="line"></div><div class="line">```java</div><div class="line"></div><div class="line">	//外部圆</div><div class="line">    Paint paintCircle = new Paint();</div><div class="line">    paintCircle.setStyle(Paint.Style.STROKE);//圆环</div><div class="line">    paintCircle.setAntiAlias(true);//抗锯齿</div><div class="line">    paintCircle.setStrokeWidth(5);//圆环宽度</div><div class="line">    canvas.drawCircle(mCircleWidth / 2, mCircleWidth / 2, mCircleWidth / 2 - 20/*减去20的原因是中心点留白*/, paintCircle);</div><div class="line">``` </div><div class="line"></div><div class="line">![](http://obh9jd33g.bkt.clouddn.com/%E6%97%B6%E9%92%9F-%E5%A4%96%E5%B1%82%E7%9A%84%E5%9C%86.png)</div><div class="line"></div><div class="line">##### 3.绘制刻度线与刻度值</div><div class="line"></div><div class="line">绘制刻度线与刻度值是最大的难点，在这里就是利用了Canvas为我们提供的rotate方法，顾名思义，就是旋转画布。我们以视图坐标系 x y 进行绘制，没绘制完成一次，旋转相应的角度就完成了刻度线的绘制。玩过PS的人应该好理解。</div><div class="line"></div><div class="line">```java</div><div class="line"></div><div class="line">    //刻度线</div><div class="line">    Paint paintDegree = new Paint();</div><div class="line">    paintDegree.setStrokeWidth(3);</div><div class="line">    for (int i = 0; i &lt; 60; i++) &#123;</div><div class="line">        if (i % 5 == 0) &#123;</div><div class="line">            paintDegree.setStrokeWidth(5);// 小时</div><div class="line">            paintDegree.setTextSize(30);</div><div class="line">            canvas.drawLine(mCircleWidth / 2, 20/*绘制外圆减去的值*/, mCircleWidth / 2, 60/*刻度线的长度*/, paintDegree);</div><div class="line">            String degree = "12";</div><div class="line">            if (i != 0)</div><div class="line">                degree = String.valueOf(i / 5);</div><div class="line">            canvas.drawText(degree, mCircleWidth / 2 - paintDegree.measureText(degree) / 2, 90/*字体的高度*/, paintDegree);</div><div class="line">        &#125; else &#123;</div><div class="line">            paintDegree.setStrokeWidth(3);//秒</div><div class="line">            paintDegree.setTextSize(15);</div><div class="line">            canvas.drawLine(mCircleWidth / 2, 20/*绘制外圆减去的值*/, mCircleWidth / 2, 30/*刻度线的长度*/, paintDegree);</div><div class="line">            String degree = String.valueOf(i);</div><div class="line">            canvas.drawText(degree, mCircleWidth / 2 - paintDegree.measureText(degree) / 2, 60/*字体的高度*/, paintDegree);</div><div class="line">        &#125;</div><div class="line">        // 旋转六度，360度/60秒  以时钟的中心点进行旋转</div><div class="line">        canvas.rotate(6, mCircleWidth / 2, mCircleWidth / 2);</div><div class="line">    &#125;</div><div class="line">``` </div><div class="line"></div><div class="line">![](http://obh9jd33g.bkt.clouddn.com/%E6%97%B6%E9%92%9F-%E5%88%BB%E5%BA%A6%E5%80%BC.png)</div><div class="line"></div><div class="line">##### 4. 绘制时分秒指针</div><div class="line">```java</div><div class="line"></div><div class="line">    //画针</div><div class="line">    Paint paintHour = new Paint();</div><div class="line">    paintHour.setStrokeWidth(20);</div><div class="line">    Paint paintMinute = new Paint();</div><div class="line">    paintMinute.setStrokeWidth(10);</div><div class="line">    Paint paintSecond = new Paint();</div><div class="line">    paintSecond.setStrokeWidth(7);</div><div class="line">    canvas.save();</div><div class="line">    // 将 x y 点移到 中心</div><div class="line">    canvas.translate(mCircleWidth / 2, mCircleWidth / 2);</div><div class="line">    //float startX, float startY, float stopX, float stopY</div><div class="line">    canvas.drawLine(0, 0, 100, 100/*暂时写死*/, paintHour);</div><div class="line">    canvas.drawLine(0, 0, 100, 280, paintSecond);</div><div class="line">    canvas.drawLine(0, 0, 100, 200, paintMinute);</div><div class="line">    //合并 画布</div><div class="line">    canvas.restore();</div></pre></td></tr></table></figure>
<p><img src="http://obh9jd33g.bkt.clouddn.com/colick_img.png" alt=""></p>
<h5 id="PS"><a href="#PS" class="headerlink" title="PS"></a>PS</h5><p>Android初级进阶之自定义时钟(一)就到这里结束，原谅我的文学水平，没有过多的文字修饰。</p>
<p>Android初级进阶之自定义时钟(二)：</p>
<pre><code>1. 完成时分秒指针的计算。
2. 与系统时间进行同步，完成真正的时钟。
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/08/随记-2016年8月8日/" itemprop="url">
                  随记-2016年8月8日
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-08T14:54:14+08:00" content="2016-08-08">
              2016-08-08
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>时间总是难熬。</p>
<p>2014年6月参加工作，到今天已经是两年了，任然是一个初级程序员，我一直在迷茫，根本静不下心来学习。刚好，公司的项目也做的差不多了，于是乎买了两本书，强迫自己看下去。自己记下这些东西，只是为了激励自己不断的上进，不断的学习。</p>
<p>到现在为止，我在三家公司工作过。第一家是在贵阳，是一个师兄创业开的公司，规模不算大，主要业务就是外包，各种各样的外包，总共呆了一年零4个月。因为我在学校主修的就是java，所以刚开始进去的时候主要是做java，也就是j2ee,写后台、写前端。。。，后来来了php，我就学习转做Android,边做边学，一直做各种各样的东西。月薪也仅仅能够养活自己。</p>
<p>2015年10月，受到了高薪的诱惑，终于决定外出发展，来到了深圳。本以为以我一年多的工作经验，很快就能找到一份好的工作，然而事实是残酷的。一个月过去了，基本上都是等通知，别人说得最多的一句话就是：”一年工作经验等于无，尤其是外包”。事实上也是这样，外包这个东西，要求的就是快，不会太深入，基本上只需要复制”轮子”就可以了，这也养成了我的懒习惯，能复制就不写。</p>
<p>就在这迷茫的日子中，我找到了我第二份工作，5K，做全栈。。。然而我只干了一个星期就跑路，能力不够啊。</p>
<p>2015年12月4日，找到了我现在的这份工作，8K，只专注与做安卓，虽然只有我一个人，但是还是不错，快一年了。学到的东西比原来一年多学到的更多。也陷入了瓶颈，无法迈向中级工程师。所以我决定开始写博客，看书，发明轮子。</p>
<p>写博客是为了时刻提醒自己！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/08/06/Android初级进阶之Shape/" itemprop="url">
                  Android初级进阶之Shape
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-08-06T16:23:26+08:00" content="2016-08-06">
              2016-08-06
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="shape"><a href="#shape" class="headerlink" title="shape"></a>shape</h2><pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line"><span class="attr">android:shape</span>=<span class="string">"rectangle|oval|ring|line"</span>&gt;<span class="comment">&lt;!--形状--&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">solid</span> /&gt;</span><span class="comment">&lt;!--背景颜色--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">corners</span> /&gt;</span><span class="comment">&lt;!--角度，圆角--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">gradient</span> /&gt;</span><span class="comment">&lt;!--线性变化--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">size</span> /&gt;</span><span class="comment">&lt;!--大小--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">stroke</span>/&gt;</span><span class="comment">&lt;!--边框--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h3 id="rectangle"><a href="#rectangle" class="headerlink" title="rectangle"></a>rectangle</h3><h4 id="圆角矩形"><a href="#圆角矩形" class="headerlink" title="圆角矩形"></a>圆角矩形</h4><p>图片</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806094622.png" alt=""></p>
<p>xml</p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">    <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"8dp"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">padding</span></span></div><div class="line">        <span class="attr">android:bottom</span>=<span class="string">"7dp"</span></div><div class="line">        <span class="attr">android:left</span>=<span class="string">"7dp"</span></div><div class="line">        <span class="attr">android:right</span>=<span class="string">"7dp"</span></div><div class="line">        <span class="attr">android:top</span>=<span class="string">"7dp"</span> /&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#f60"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><p>注<br>    使用bottomLeftRadius等属性，可以做出不同的效果，如左两边圆角，右两边不圆角等。</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806100626.png" alt="">  <img src="http://obh9jd33g.bkt.clouddn.com/20160806100746.png" alt=""></p>
<h4 id="圆角矩形-边框"><a href="#圆角矩形-边框" class="headerlink" title="圆角矩形-边框"></a>圆角矩形-边框</h4><p>图片</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806101759.png" alt=""></p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">   <span class="attr">android:shape</span>=<span class="string">"rectangle"</span>&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"@color/colorPrimaryDark"</span> /&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">corners</span> <span class="attr">android:radius</span>=<span class="string">"10dp"</span> /&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">stroke</span></span></div><div class="line">       <span class="attr">android:width</span>=<span class="string">"10dp"</span></div><div class="line">       <span class="attr">android:color</span>=<span class="string">"#f60"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><p>注<br>    虚线：</p>
<pre><code>&lt;stroke
    android:width=&quot;10dp&quot;
    android:dashGap=&quot;3dp&quot;&lt;!--虚线间隔--&gt;
    android:dashWidth=&quot;13dp&quot;&lt;!--虚线宽度--&gt;
    android:color=&quot;#f60&quot; /&gt;
</code></pre><p>图</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806102143.png" alt=""></p>
<h3 id="oval"><a href="#oval" class="headerlink" title="oval"></a>oval</h3><h4 id="实心圆"><a href="#实心圆" class="headerlink" title="实心圆"></a>实心圆</h4><p>图片</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806095710.png" alt=""></p>
<p>xml</p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">   <span class="attr">android:shape</span>=<span class="string">"oval"</span></div><div class="line">   <span class="attr">android:useLevel</span>=<span class="string">"false"</span></div><div class="line">   &gt;</div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#f60"</span> /&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">size</span></span></div><div class="line">       <span class="attr">android:width</span>=<span class="string">"50dp"</span></div><div class="line">       <span class="attr">android:height</span>=<span class="string">"50dp"</span> /&gt;</div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><h4 id="实心圆-边框"><a href="#实心圆-边框" class="headerlink" title="实心圆-边框"></a>实心圆-边框</h4><p>图片</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806101127.png" alt=""></p>
<p>xml</p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">   <span class="attr">android:shape</span>=<span class="string">"oval"</span></div><div class="line">   <span class="attr">android:useLevel</span>=<span class="string">"false"</span>&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#03a9f4"</span> /&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">size</span></span></div><div class="line">       <span class="attr">android:width</span>=<span class="string">"20dp"</span></div><div class="line">       <span class="attr">android:height</span>=<span class="string">"20dp"</span> /&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">stroke</span></span></div><div class="line">       <span class="attr">android:width</span>=<span class="string">"5dp"</span></div><div class="line">       <span class="attr">android:color</span>=<span class="string">"#f60"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre><p>注：<br>    虚线等与矩形相同</p>
<h3 id="ring"><a href="#ring" class="headerlink" title="ring"></a>ring</h3><p>图片</p>
<p><img src="http://obh9jd33g.bkt.clouddn.com/20160806100007.png" alt=""></p>
<p>xml</p>
<pre><code><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="utf-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">shape</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></div><div class="line">   <span class="attr">android:shape</span>=<span class="string">"ring"</span></div><div class="line">   <span class="attr">android:useLevel</span>=<span class="string">"false"</span></div><div class="line">   <span class="attr">android:innerRadiusRatio</span>=<span class="string">"4"</span></div><div class="line">   <span class="attr">android:thicknessRatio</span>=<span class="string">"8"</span>&gt;</div><div class="line">   <span class="tag">&lt;<span class="name">solid</span> <span class="attr">android:color</span>=<span class="string">"#f00"</span> /&gt;</span></div><div class="line"></div><div class="line">   <span class="tag">&lt;<span class="name">size</span></span></div><div class="line">       <span class="attr">android:width</span>=<span class="string">"100dp"</span></div><div class="line">       <span class="attr">android:height</span>=<span class="string">"100dp"</span> /&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">shape</span>&gt;</span></div></pre></td></tr></table></figure>
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/header.png"
               alt="江俊超" />
          <p class="site-author-name" itemprop="name">江俊超</p>
          <p class="site-description motion-element" itemprop="description">Android</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">7</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">江俊超</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
